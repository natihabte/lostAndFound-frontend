<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Organization Management System - Test Guide</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: #333;
        }
        .container {
            background: white;
            border-radius: 12px;
            padding: 30px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            margin-bottom: 20px;
        }
        .header {
            text-align: center;
            margin-bottom: 40px;
            padding-bottom: 20px;
            border-bottom: 2px solid #f0f0f0;
        }
        .header h1 {
            color: #2d3748;
            margin-bottom: 10px;
            font-size: 2.5rem;
        }
        .header p {
            color: #718096;
            font-size: 1.1rem;
        }
        .section {
            margin-bottom: 30px;
        }
        .section h2 {
            color: #2d3748;
            border-left: 4px solid #4299e1;
            padding-left: 15px;
            margin-bottom: 20px;
        }
        .credentials {
            background: #f7fafc;
            border: 1px solid #e2e8f0;
            border-radius: 8px;
            padding: 20px;
            margin: 15px 0;
        }
        .credentials h3 {
            color: #2d3748;
            margin-top: 0;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        .credential-item {
            background: white;
            border: 1px solid #e2e8f0;
            border-radius: 6px;
            padding: 15px;
            margin: 10px 0;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .credential-info {
            flex: 1;
        }
        .credential-info strong {
            color: #2d3748;
            display: block;
            margin-bottom: 5px;
        }
        .credential-info span {
            color: #718096;
            font-size: 0.9rem;
        }
        .copy-btn {
            background: #4299e1;
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 0.9rem;
            transition: background 0.2s;
        }
        .copy-btn:hover {
            background: #3182ce;
        }
        .feature-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }
        .feature-card {
            background: #f7fafc;
            border: 1px solid #e2e8f0;
            border-radius: 8px;
            padding: 20px;
        }
        .feature-card h4 {
            color: #2d3748;
            margin-top: 0;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        .feature-card ul {
            margin: 0;
            padding-left: 20px;
        }
        .feature-card li {
            margin: 8px 0;
            color: #4a5568;
        }
        .status-badge {
            display: inline-block;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 600;
            text-transform: uppercase;
        }
        .status-success {
            background: #c6f6d5;
            color: #22543d;
        }
        .status-warning {
            background: #fef5e7;
            color: #744210;
        }
        .status-info {
            background: #bee3f8;
            color: #2a4365;
        }
        .test-steps {
            background: #edf2f7;
            border-radius: 8px;
            padding: 20px;
            margin: 20px 0;
        }
        .test-steps ol {
            margin: 0;
            padding-left: 20px;
        }
        .test-steps li {
            margin: 10px 0;
            color: #4a5568;
            line-height: 1.6;
        }
        .api-endpoint {
            background: #1a202c;
            color: #e2e8f0;
            padding: 15px;
            border-radius: 6px;
            font-family: 'Courier New', monospace;
            margin: 10px 0;
            overflow-x: auto;
        }
        .api-method {
            color: #68d391;
            font-weight: bold;
        }
        .quick-links {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
            margin: 20px 0;
        }
        .quick-link {
            background: #4299e1;
            color: white;
            text-decoration: none;
            padding: 12px 24px;
            border-radius: 6px;
            font-weight: 500;
            transition: background 0.2s;
        }
        .quick-link:hover {
            background: #3182ce;
            text-decoration: none;
            color: white;
        }
        .icon {
            width: 20px;
            height: 20px;
            display: inline-block;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üèóÔ∏è Admin Organization Management System</h1>
            <p>Complete testing guide for the MERN Stack Lost & Found Platform</p>
            <div class="status-badge status-success">Production Ready</div>
        </div>

        <div class="section">
            <h2>üöÄ Quick Start</h2>
            <div class="quick-links">
                <a href="http://localhost:3000" target="_blank" class="quick-link">
                    üåê Open Application
                </a>
                <a href="http://localhost:5001/api" target="_blank" class="quick-link">
                    üîå API Status
                </a>
                <a href="#credentials" class="quick-link">
                    üîë Login Credentials
                </a>
                <a href="#testing" class="quick-link">
                    üß™ Testing Guide
                </a>
            </div>
        </div>

        <div class="section" id="credentials">
            <h2>üîë Login Credentials</h2>
            
            <div class="credentials">
                <h3>üëë Super Administrator</h3>
                <div class="credential-item">
                    <div class="credential-info">
                        <strong>superadmin@lostandfound.com</strong>
                        <span>Full platform control - Create, manage, and delete organizations</span>
                    </div>
                    <button class="copy-btn" onclick="copyCredentials('superadmin@lostandfound.com', 'SuperAdmin123!')">
                        Copy Login
                    </button>
                </div>
            </div>

            <div class="credentials">
                <h3>üè¢ Organization Administrators</h3>
                
                <div class="credential-item">
                    <div class="credential-info">
                        <strong>admin@aau.edu.et</strong>
                        <span>Addis Ababa University - University sector management</span>
                    </div>
                    <button class="copy-btn" onclick="copyCredentials('admin@aau.edu.et', 'AAUAdmin123!')">
                        Copy Login
                    </button>
                </div>

                <div class="credential-item">
                    <div class="credential-info">
                        <strong>admin@addisababa.gov.et</strong>
                        <span>Addis Ababa City Administration - Municipal management</span>
                    </div>
                    <button class="copy-btn" onclick="copyCredentials('admin@addisababa.gov.et', 'CityAdmin123!')">
                        Copy Login
                    </button>
                </div>

                <div class="credential-item">
                    <div class="credential-info">
                        <strong>admin@blacklion.gov.et</strong>
                        <span>Black Lion Hospital - Healthcare sector management</span>
                    </div>
                    <button class="copy-btn" onclick="copyCredentials('admin@blacklion.gov.et', 'HospitalAdmin123!')">
                        Copy Login
                    </button>
                </div>
            </div>
        </div>

        <div class="section">
            <h2>üéØ System Features</h2>
            <div class="feature-grid">
                <div class="feature-card">
                    <h4>üëë Super Admin Controls</h4>
                    <ul>
                        <li>Create and manage organizations</li>
                        <li>Approve/reject organization requests</li>
                        <li>Suspend/reactivate organizations</li>
                        <li>Control organization permissions</li>
                        <li>View platform-wide statistics</li>
                        <li>Manage subscription plans</li>
                    </ul>
                </div>

                <div class="feature-card">
                    <h4>üè¢ Organization Management</h4>
                    <ul>
                        <li>Organization lifecycle control</li>
                        <li>Status management (pending/active/suspended)</li>
                        <li>Permission system with feature gates</li>
                        <li>Multi-tenant data isolation</li>
                        <li>Subscription-based access control</li>
                        <li>Real-time statistics dashboard</li>
                    </ul>
                </div>

                <div class="feature-card">
                    <h4>üîí Security & Access Control</h4>
                    <ul>
                        <li>Role-based access control (RBAC)</li>
                        <li>JWT-based authentication</li>
                        <li>Granular permission system</li>
                        <li>Activity logging and audit trails</li>
                        <li>Secure password hashing</li>
                        <li>Session management</li>
                    </ul>
                </div>

                <div class="feature-card">
                    <h4>üìä Analytics & Reporting</h4>
                    <ul>
                        <li>Platform-wide statistics</li>
                        <li>Organization-specific metrics</li>
                        <li>User activity tracking</li>
                        <li>Real-time dashboard updates</li>
                        <li>Export capabilities</li>
                        <li>Performance monitoring</li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="section" id="testing">
            <h2>üß™ Testing Guide</h2>
            
            <div class="test-steps">
                <h3>Step 1: Setup Test Data</h3>
                <ol>
                    <li>Navigate to the backend directory: <code>cd backend</code></li>
                    <li>Run the test setup script: <code>node test-admin-organization-system.js</code></li>
                    <li>Verify test data creation in the console output</li>
                    <li>Start the backend server: <code>npm run dev</code></li>
                    <li>Start the frontend server: <code>npm start</code></li>
                </ol>
            </div>

            <div class="test-steps">
                <h3>Step 2: Super Admin Testing</h3>
                <ol>
                    <li>Open <a href="http://localhost:3000" target="_blank">http://localhost:3000</a></li>
                    <li>Click "Admin Login" (purple button at bottom)</li>
                    <li>Login with super admin credentials</li>
                    <li>Navigate to "Organizations" in the admin dashboard</li>
                    <li>Test organization management features:
                        <ul>
                            <li>View organization list with status indicators</li>
                            <li>Search and filter organizations</li>
                            <li>View organization details and statistics</li>
                            <li>Test status changes (suspend/reactivate)</li>
                            <li>Test permission updates</li>
                        </ul>
                    </li>
                </ol>
            </div>

            <div class="test-steps">
                <h3>Step 3: Organization Admin Testing</h3>
                <ol>
                    <li>Logout from super admin account</li>
                    <li>Login with any organization admin credentials</li>
                    <li>Verify organization-specific dashboard access</li>
                    <li>Test organization admin features:
                        <ul>
                            <li>User management within organization</li>
                            <li>Item approval workflows</li>
                            <li>Organization settings access</li>
                            <li>Reports and analytics</li>
                        </ul>
                    </li>
                </ol>
            </div>

            <div class="test-steps">
                <h3>Step 4: API Testing</h3>
                <ol>
                    <li>Test API endpoints using Postman or curl</li>
                    <li>Verify authentication and authorization</li>
                    <li>Test CRUD operations for organizations</li>
                    <li>Validate permission-based access control</li>
                    <li>Check error handling and responses</li>
                </ol>
            </div>
        </div>

        <div class="section">
            <h2>üîå API Endpoints</h2>
            
            <div class="api-endpoint">
                <span class="api-method">GET</span> /api/admin/organizations
                <br><small>Get all organizations with filtering and pagination</small>
            </div>

            <div class="api-endpoint">
                <span class="api-method">POST</span> /api/admin/organizations
                <br><small>Create new organization with admin user</small>
            </div>

            <div class="api-endpoint">
                <span class="api-method">PUT</span> /api/admin/organizations/:id/status
                <br><small>Update organization status (approve/suspend/reject)</small>
            </div>

            <div class="api-endpoint">
                <span class="api-method">PUT</span> /api/admin/organizations/:id/permissions
                <br><small>Update organization permissions and features</small>
            </div>

            <div class="api-endpoint">
                <span class="api-method">GET</span> /api/admin/dashboard/stats
                <br><small>Get platform-wide statistics for admin dashboard</small>
            </div>

            <div class="api-endpoint">
                <span class="api-method">DELETE</span> /api/admin/organizations/:id
                <br><small>Delete organization with optional data transfer</small>
            </div>
        </div>

        <div class="section">
            <h2>üìã Test Scenarios</h2>
            
            <div class="feature-grid">
                <div class="feature-card">
                    <h4>üè¢ Organization Lifecycle</h4>
                    <ul>
                        <li>Create new organization</li>
                        <li>Approve pending organization</li>
                        <li>Suspend active organization</li>
                        <li>Reactivate suspended organization</li>
                        <li>Reject organization request</li>
                        <li>Delete organization safely</li>
                    </ul>
                </div>

                <div class="feature-card">
                    <h4>üîê Permission Testing</h4>
                    <ul>
                        <li>Update organization permissions</li>
                        <li>Test feature access control</li>
                        <li>Validate usage limits</li>
                        <li>Check subscription features</li>
                        <li>Test role-based access</li>
                        <li>Verify permission inheritance</li>
                    </ul>
                </div>

                <div class="feature-card">
                    <h4>üë• User Management</h4>
                    <ul>
                        <li>Create organization admin</li>
                        <li>Assign user roles</li>
                        <li>Update user permissions</li>
                        <li>Suspend user accounts</li>
                        <li>Transfer users between orgs</li>
                        <li>Bulk user operations</li>
                    </ul>
                </div>

                <div class="feature-card">
                    <h4>üìä Analytics Testing</h4>
                    <ul>
                        <li>View platform statistics</li>
                        <li>Check organization metrics</li>
                        <li>Test real-time updates</li>
                        <li>Validate data accuracy</li>
                        <li>Export functionality</li>
                        <li>Performance monitoring</li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="section">
            <h2>‚úÖ System Status</h2>
            <div class="feature-grid">
                <div class="feature-card">
                    <h4>üèóÔ∏è Implementation Status</h4>
                    <ul>
                        <li><span class="status-badge status-success">Complete</span> Database Models</li>
                        <li><span class="status-badge status-success">Complete</span> API Endpoints</li>
                        <li><span class="status-badge status-success">Complete</span> Authentication</li>
                        <li><span class="status-badge status-success">Complete</span> Authorization</li>
                        <li><span class="status-badge status-success">Complete</span> Frontend UI</li>
                        <li><span class="status-badge status-success">Complete</span> Testing Suite</li>
                    </ul>
                </div>

                <div class="feature-card">
                    <h4>üöÄ Production Readiness</h4>
                    <ul>
                        <li><span class="status-badge status-success">Ready</span> Security Implementation</li>
                        <li><span class="status-badge status-success">Ready</span> Error Handling</li>
                        <li><span class="status-badge status-success">Ready</span> Data Validation</li>
                        <li><span class="status-badge status-success">Ready</span> Activity Logging</li>
                        <li><span class="status-badge status-success">Ready</span> Performance Optimization</li>
                        <li><span class="status-badge status-success">Ready</span> Documentation</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>

    <script>
        function copyCredentials(email, password) {
            const credentials = `Email: ${email}\nPassword: ${password}`;
            navigator.clipboard.writeText(credentials).then(() => {
                // Show temporary success message
                const btn = event.target;
                const originalText = btn.textContent;
                btn.textContent = 'Copied!';
                btn.style.background = '#48bb78';
                
                setTimeout(() => {
                    btn.textContent = originalText;
                    btn.style.background = '#4299e1';
                }, 2000);
            }).catch(err => {
                console.error('Failed to copy credentials:', err);
                alert(`Credentials:\nEmail: ${email}\nPassword: ${password}`);
            });
        }

        // Auto-check server status
        function checkServerStatus() {
            Promise.all([
                fetch('http://localhost:3000').catch(() => ({ ok: false })),
                fetch('http://localhost:5001/api').catch(() => ({ ok: false }))
            ]).then(([frontend, backend]) => {
                const frontendStatus = frontend.ok ? 'Running' : 'Offline';
                const backendStatus = backend.ok ? 'Running' : 'Offline';
                
                console.log(`Frontend: ${frontendStatus}, Backend: ${backendStatus}`);
                
                // Update UI if needed
                const statusElements = document.querySelectorAll('.server-status');
                statusElements.forEach(el => {
                    el.textContent = `Frontend: ${frontendStatus} | Backend: ${backendStatus}`;
                    el.className = `server-status ${frontend.ok && backend.ok ? 'status-success' : 'status-warning'}`;
                });
            });
        }

        // Check server status on load
        document.addEventListener('DOMContentLoaded', () => {
            checkServerStatus();
            // Check every 30 seconds
            setInterval(checkServerStatus, 30000);
        });
    </script>
</body>
</html>