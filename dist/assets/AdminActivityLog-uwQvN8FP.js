import{u as N,r as a,j as e}from"./index-Iy8zicZ9.js";const A=({darkMode:t})=>{const{t:v}=N(),[u,p]=a.useState([]),[j,y]=a.useState(!0),[n,x]=a.useState(""),[o,g]=a.useState("all"),[c,h]=a.useState("all"),[l,b]=a.useState({});a.useEffect(()=>{const s=[{_id:"1",action:"user_registered",description:"New user registered: John Doe (john@example.com)",user:{name:"John Doe",email:"john@example.com",role:"user"},timestamp:new Date(Date.now()-3e5),ipAddress:"192.168.1.100",userAgent:"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36",metadata:{email:"john@example.com",registrationMethod:"email"}},{_id:"2",action:"user_login",description:"User logged in: john@example.com",user:{name:"John Doe",email:"john@example.com",role:"user"},timestamp:new Date(Date.now()-6e5),ipAddress:"192.168.1.100",userAgent:"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36",metadata:{email:"john@example.com",loginCount:1}},{_id:"3",action:"user_verified",description:"User verified email: john@example.com",user:{name:"John Doe",email:"john@example.com",role:"user"},timestamp:new Date(Date.now()-9e5),ipAddress:"192.168.1.100",userAgent:"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36",metadata:{email:"john@example.com",verificationMethod:"email_code"}},{_id:"4",action:"admin_login",description:"Admin logged in: admin@platform.com",user:{name:"Admin User",email:"admin@platform.com",role:"admin"},timestamp:new Date(Date.now()-18e5),ipAddress:"192.168.1.50",userAgent:"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36",metadata:{email:"admin@platform.com",role:"admin"}},{_id:"5",action:"item_created",description:"New item posted: Lost iPhone 13",user:{name:"Jane Smith",email:"jane@example.com",role:"user"},timestamp:new Date(Date.now()-27e5),ipAddress:"192.168.1.101",userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 15_0 like Mac OS X)",metadata:{itemTitle:"Lost iPhone 13",category:"Electronics"}}];p(s),b({totalActivities:s.length,todayActivities:s.filter(r=>new Date(r.timestamp).toDateString()===new Date().toDateString()).length,uniqueUsers:new Set(s.map(r=>r.user.email)).size,registrations:s.filter(r=>r.action==="user_registered").length,logins:s.filter(r=>r.action.includes("login")).length}),y(!1)},[]);const f=s=>{const r=new Date,d=new Date(s),i=Math.floor((r-d)/(1e3*60));return i<1?"Just now":i<60?`${i}m ago`:i<1440?`${Math.floor(i/60)}h ago`:`${Math.floor(i/1440)}d ago`},m=u.filter(s=>{const r=s.description.toLowerCase().includes(n.toLowerCase())||s.user.name.toLowerCase().includes(n.toLowerCase())||s.user.email.toLowerCase().includes(n.toLowerCase()),d=o==="all"||s.action===o,i=c==="all"||s.user.role===c;return r&&d&&i});return j?e.jsx("div",{className:`min-h-screen ${t?"bg-gray-900":"bg-gray-50"} flex items-center justify-center`,children:e.jsx("div",{className:"flex items-center space-x-2",children:e.jsx("span",{className:t?"text-white":"text-gray-900",children:"Loading activities..."})})}):e.jsx("div",{className:`min-h-screen ${t?"bg-gray-900":"bg-gray-50"}`,children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:`text-3xl font-bold ${t?"text-white":"text-gray-900"} mb-2`,children:"User Activity Log"}),e.jsx("p",{className:`${t?"text-gray-300":"text-gray-600"}`,children:"Monitor all user actions including registrations, logins, and system activities"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4 mb-8",children:[e.jsx("div",{className:`${t?"bg-gray-800 border-gray-700":"bg-white border-gray-200"} border rounded-lg p-4`,children:e.jsx("div",{className:"flex items-center",children:e.jsxs("div",{className:"ml-3",children:[e.jsx("p",{className:`text-sm font-medium ${t?"text-gray-300":"text-gray-600"}`,children:"Total Activities"}),e.jsx("p",{className:`text-2xl font-bold ${t?"text-white":"text-gray-900"}`,children:l.totalActivities})]})})}),e.jsx("div",{className:`${t?"bg-gray-800 border-gray-700":"bg-white border-gray-200"} border rounded-lg p-4`,children:e.jsx("div",{className:"flex items-center",children:e.jsxs("div",{className:"ml-3",children:[e.jsx("p",{className:`text-sm font-medium ${t?"text-gray-300":"text-gray-600"}`,children:"Today"}),e.jsx("p",{className:`text-2xl font-bold ${t?"text-white":"text-gray-900"}`,children:l.todayActivities})]})})}),e.jsx("div",{className:`${t?"bg-gray-800 border-gray-700":"bg-white border-gray-200"} border rounded-lg p-4`,children:e.jsx("div",{className:"flex items-center",children:e.jsxs("div",{className:"ml-3",children:[e.jsx("p",{className:`text-sm font-medium ${t?"text-gray-300":"text-gray-600"}`,children:"Active Users"}),e.jsx("p",{className:`text-2xl font-bold ${t?"text-white":"text-gray-900"}`,children:l.uniqueUsers})]})})}),e.jsx("div",{className:`${t?"bg-gray-800 border-gray-700":"bg-white border-gray-200"} border rounded-lg p-4`,children:e.jsx("div",{className:"flex items-center",children:e.jsxs("div",{className:"ml-3",children:[e.jsx("p",{className:`text-sm font-medium ${t?"text-gray-300":"text-gray-600"}`,children:"Registrations"}),e.jsx("p",{className:`text-2xl font-bold ${t?"text-white":"text-gray-900"}`,children:l.registrations})]})})}),e.jsx("div",{className:`${t?"bg-gray-800 border-gray-700":"bg-white border-gray-200"} border rounded-lg p-4`,children:e.jsx("div",{className:"flex items-center",children:e.jsxs("div",{className:"ml-3",children:[e.jsx("p",{className:`text-sm font-medium ${t?"text-gray-300":"text-gray-600"}`,children:"Logins"}),e.jsx("p",{className:`text-2xl font-bold ${t?"text-white":"text-gray-900"}`,children:l.logins})]})})})]}),e.jsx("div",{className:`${t?"bg-gray-800 border-gray-700":"bg-white border-gray-200"} border rounded-lg p-6 mb-6`,children:e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 items-start sm:items-center",children:[e.jsx("div",{className:"relative flex-1 max-w-md",children:e.jsx("input",{type:"text",placeholder:"Search activities, users, or descriptions...",value:n,onChange:s=>x(s.target.value),className:`w-full pl-10 pr-4 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 ${t?"border-gray-600 bg-gray-700 text-white placeholder-gray-400":"border-gray-300 bg-white text-gray-900 placeholder-gray-500"}`})}),e.jsxs("select",{value:o,onChange:s=>g(s.target.value),className:`border rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500 ${t?"border-gray-600 bg-gray-700 text-white":"border-gray-300 bg-white text-gray-900"}`,children:[e.jsx("option",{value:"all",children:"All Actions"}),e.jsx("option",{value:"user_registered",children:"Registrations"}),e.jsx("option",{value:"user_verified",children:"Verifications"}),e.jsx("option",{value:"user_login",children:"User Logins"}),e.jsx("option",{value:"admin_login",children:"Admin Logins"}),e.jsx("option",{value:"password_changed",children:"Password Changes"}),e.jsx("option",{value:"profile_updated",children:"Profile Updates"}),e.jsx("option",{value:"item_created",children:"Items Created"})]}),e.jsxs("select",{value:c,onChange:s=>h(s.target.value),className:`border rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500 ${t?"border-gray-600 bg-gray-700 text-white":"border-gray-300 bg-white text-gray-900"}`,children:[e.jsx("option",{value:"all",children:"All Users"}),e.jsx("option",{value:"user",children:"Regular Users"}),e.jsx("option",{value:"admin",children:"Administrators"})]}),e.jsx("button",{onClick:()=>{x(""),g("all"),h("all")},className:"px-4 py-2 bg-gray-600 text-white rounded-md hover:bg-gray-700",children:"Clear Filters"})]})}),e.jsxs("div",{className:`${t?"bg-gray-800 border-gray-700":"bg-white border-gray-200"} border rounded-lg shadow-sm`,children:[e.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:e.jsxs("h2",{className:`text-lg font-semibold ${t?"text-white":"text-gray-900"} flex items-center`,children:["Recent Activities (",m.length,")"]})}),e.jsx("div",{className:"divide-y divide-gray-200",children:m.length>0?m.map(s=>{var r;return e.jsx("div",{className:`p-6 ${t?"hover:bg-gray-700":"hover:bg-gray-50"} transition-colors`,children:e.jsx("div",{className:"flex items-start space-x-4",children:e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:`text-sm font-medium ${t?"text-white":"text-gray-900"}`,children:s.description}),e.jsxs("div",{className:"flex items-center space-x-4 mt-1",children:[e.jsxs("span",{className:`text-xs ${t?"text-gray-400":"text-gray-500"} flex items-center`,children:[s.user.name," (",s.user.email,")"]}),s.user.role==="admin"&&e.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-purple-100 text-purple-800",children:"Admin"})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:`text-xs ${t?"text-gray-400":"text-gray-500"} flex items-center`,children:f(s.timestamp)}),e.jsx("p",{className:`text-xs ${t?"text-gray-500":"text-gray-400"} mt-1`,children:new Date(s.timestamp).toLocaleString()})]})]}),e.jsxs("div",{className:"mt-3 grid grid-cols-1 md:grid-cols-2 gap-4 text-xs",children:[e.jsxs("div",{className:`${t?"text-gray-400":"text-gray-500"} flex items-center`,children:["IP: ",s.ipAddress]}),e.jsx("div",{className:`${t?"text-gray-400":"text-gray-500"} flex items-center`,children:((r=s.userAgent)==null?void 0:r.split(" ")[0])||"Unknown Browser"})]}),s.metadata&&Object.keys(s.metadata).length>0&&e.jsx("div",{className:"mt-2",children:e.jsxs("details",{className:"group",children:[e.jsx("summary",{className:`cursor-pointer text-xs ${t?"text-gray-400":"text-gray-500"} hover:text-blue-600`,children:"View Details"}),e.jsx("div",{className:`mt-2 p-2 ${t?"bg-gray-700":"bg-gray-50"} rounded text-xs`,children:e.jsx("pre",{className:`${t?"text-gray-300":"text-gray-600"}`,children:JSON.stringify(s.metadata,null,2)})})]})})]})})},s._id)}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx("h3",{className:`mt-2 text-sm font-medium ${t?"text-gray-300":"text-gray-900"}`,children:"No activities found"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Try adjusting your search or filter criteria."})]})})]})]})})};export{A as default};
//# sourceMappingURL=AdminActivityLog-uwQvN8FP.js.map
