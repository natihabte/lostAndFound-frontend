{"version":3,"file":"OrganizationVerification-Ns-esZBj.js","sources":["../../src/pages/OrganizationVerification.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { useTranslation } from 'react-i18next';\r\nconst OrganizationVerification = ({ setCurrentPage, darkMode }) => {\r\n  const { t } = useTranslation();\r\n  const [status, setStatus] = useState('verifying'); // verifying, success, error, expired\r\n  const [message, setMessage] = useState('');\r\n  const [organizationData, setOrganizationData] = useState(null);\r\n  const [resendLoading, setResendLoading] = useState(false);\r\n\r\n  useEffect(() => {\r\n    const verifyEmail = async () => {\r\n      const urlParams = new URLSearchParams(window.location.search);\r\n      const token = urlParams.get('token');\r\n\r\n      if (!token) {\r\n        setStatus('error');\r\n        setMessage('Invalid verification link');\r\n        return;\r\n      }\r\n\r\n      try {\r\n        const response = await fetch('http://localhost:5001/api/organizations/verify-email', {\r\n          method: 'POST',\r\n          headers: {\r\n            'Content-Type': 'application/json'\r\n          },\r\n          body: JSON.stringify({ token })\r\n        });\r\n\r\n        const data = await response.json();\r\n\r\n        if (data.success) {\r\n          setStatus('success');\r\n          setMessage(data.message);\r\n          setOrganizationData(data.data);\r\n        } else {\r\n          setStatus('error');\r\n          setMessage(data.message);\r\n        }\r\n      } catch (error) {\r\n        console.error('Verification error:', error);\r\n        setStatus('error');\r\n        setMessage('Failed to verify email. Please try again.');\r\n      }\r\n    };\r\n\r\n    verifyEmail();\r\n  }, []);\r\n\r\n  const handleResendVerification = async () => {\r\n    const email = prompt('Please enter your admin email address:');\r\n    if (!email) return;\r\n\r\n    setResendLoading(true);\r\n    try {\r\n      const response = await fetch('http://localhost:5001/api/organizations/resend-verification', {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json'\r\n        },\r\n        body: JSON.stringify({ email })\r\n      });\r\n\r\n      const data = await response.json();\r\n      \r\n      if (data.success) {\r\n        alert('Verification email sent successfully! Please check your inbox.');\r\n      } else {\r\n        alert(data.message || 'Failed to send verification email');\r\n      }\r\n    } catch (error) {\r\n      console.error('Resend error:', error);\r\n      alert('Failed to send verification email. Please try again.');\r\n    } finally {\r\n      setResendLoading(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className={`min-h-screen ${darkMode ? 'bg-gray-900' : 'bg-gray-50'} py-12`}>\r\n      <div className=\"max-w-2xl mx-auto px-4 sm:px-6 lg:px-8\">\r\n        <div className={`${darkMode ? 'bg-gray-800' : 'bg-white'} rounded-2xl shadow-xl p-8 text-center`}>\r\n          \r\n          {/* Verifying State */}\r\n          {status === 'verifying' && (\r\n            <div>\r\n              <div className=\"flex justify-center mb-6\">\r\n                <div className=\"h-16 w-16 bg-blue-100 rounded-full flex items-center justify-center\">\r\n                  \r\n                </div>\r\n              </div>\r\n              <h1 className={`text-2xl font-bold ${darkMode ? 'text-white' : 'text-gray-900'} mb-4`}>\r\n                Verifying Your Email\r\n              </h1>\r\n              <p className={`${darkMode ? 'text-gray-300' : 'text-gray-600'}`}>\r\n                Please wait while we verify your email address...\r\n              </p>\r\n            </div>\r\n          )}\r\n\r\n          {/* Success State */}\r\n          {status === 'success' && (\r\n            <div>\r\n              <div className=\"flex justify-center mb-6\">\r\n                <div className=\"h-16 w-16 bg-green-100 rounded-full flex items-center justify-center\">\r\n                  \r\n                </div>\r\n              </div>\r\n              <h1 className={`text-2xl font-bold ${darkMode ? 'text-white' : 'text-gray-900'} mb-4`}>\r\n                Email Verified Successfully!\r\n              </h1>\r\n              <p className={`${darkMode ? 'text-gray-300' : 'text-gray-600'} mb-6`}>\r\n                {message}\r\n              </p>\r\n\r\n              {organizationData && (\r\n                <div className={`${darkMode ? 'bg-gray-700' : 'bg-gray-50'} rounded-lg p-6 mb-6`}>\r\n                  <h3 className={`text-lg font-medium ${darkMode ? 'text-white' : 'text-gray-900'} mb-4`}>\r\n                    Organization Details\r\n                  </h3>\r\n                  <div className=\"text-left space-y-2\">\r\n                    <div className=\"flex justify-between\">\r\n                      <span className={`${darkMode ? 'text-gray-400' : 'text-gray-500'}`}>Organization:</span>\r\n                      <span className={`${darkMode ? 'text-white' : 'text-gray-900'} font-medium`}>\r\n                        {organizationData.organization.name}\r\n                      </span>\r\n                    </div>\r\n                    <div className=\"flex justify-between\">\r\n                      <span className={`${darkMode ? 'text-gray-400' : 'text-gray-500'}`}>Admin:</span>\r\n                      <span className={`${darkMode ? 'text-white' : 'text-gray-900'} font-medium`}>\r\n                        {organizationData.user.name}\r\n                      </span>\r\n                    </div>\r\n                    <div className=\"flex justify-between\">\r\n                      <span className={`${darkMode ? 'text-gray-400' : 'text-gray-500'}`}>Status:</span>\r\n                      <span className={`${\r\n                        organizationData.organization.status === 'active' \r\n                          ? 'text-green-600' \r\n                          : 'text-yellow-600'\r\n                      } font-medium`}>\r\n                        {organizationData.organization.status === 'active' ? 'Active' : 'Pending Approval'}\r\n                      </span>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              )}\r\n\r\n              {/* Next Steps */}\r\n              <div className={`${darkMode ? 'bg-blue-900/20 border-blue-700' : 'bg-blue-50 border-blue-200'} border rounded-lg p-4 mb-6`}>\r\n                <div className=\"flex items-start\">\r\n                  \r\n                  <div className=\"text-left\">\r\n                    <h4 className={`text-sm font-medium ${darkMode ? 'text-blue-300' : 'text-blue-900'} mb-2`}>\r\n                      What's Next?\r\n                    </h4>\r\n                    <ul className={`text-xs ${darkMode ? 'text-blue-200' : 'text-blue-700'} space-y-1`}>\r\n                      <li>• Your organization is now pending approval</li>\r\n                      <li>• Our team will review your application within 24-48 hours</li>\r\n                      <li>• You'll receive an email notification once approved</li>\r\n                      <li>• After approval, you can start your 14-day free trial</li>\r\n                    </ul>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n\r\n              <button\r\n                onClick={() => setCurrentPage('login')}\r\n                className=\"w-full bg-blue-600 text-white py-3 px-6 rounded-lg font-medium hover:bg-blue-700 transition-colors flex items-center justify-center\"\r\n              >\r\n                Continue to Login\r\n                \r\n              </button>\r\n            </div>\r\n          )}\r\n\r\n          {/* Error State */}\r\n          {status === 'error' && (\r\n            <div>\r\n              <div className=\"flex justify-center mb-6\">\r\n                <div className=\"h-16 w-16 bg-red-100 rounded-full flex items-center justify-center\">\r\n                  \r\n                </div>\r\n              </div>\r\n              <h1 className={`text-2xl font-bold ${darkMode ? 'text-white' : 'text-gray-900'} mb-4`}>\r\n                Verification Failed\r\n              </h1>\r\n              <p className={`${darkMode ? 'text-gray-300' : 'text-gray-600'} mb-6`}>\r\n                {message}\r\n              </p>\r\n\r\n              <div className=\"space-y-4\">\r\n                <button\r\n                  onClick={handleResendVerification}\r\n                  disabled={resendLoading}\r\n                  className=\"w-full bg-blue-600 text-white py-3 px-6 rounded-lg font-medium hover:bg-blue-700 disabled:opacity-50 transition-colors flex items-center justify-center\"\r\n                >\r\n                  {resendLoading ? (\r\n                    <>\r\n                      \r\n                      Sending...\r\n                    </>\r\n                  ) : (\r\n                    <>\r\n                      \r\n                      Resend Verification Email\r\n                    </>\r\n                  )}\r\n                </button>\r\n\r\n                <button\r\n                  onClick={() => setCurrentPage('public-sector-registration')}\r\n                  className={`w-full border py-3 px-6 rounded-lg font-medium transition-colors ${\r\n                    darkMode \r\n                      ? 'border-gray-600 text-gray-300 hover:bg-gray-700' \r\n                      : 'border-gray-300 text-gray-700 hover:bg-gray-50'\r\n                  }`}\r\n                >\r\n                  Register New Organization\r\n                </button>\r\n              </div>\r\n            </div>\r\n          )}\r\n\r\n          {/* Help Section */}\r\n          <div className=\"mt-8 pt-6 border-t border-gray-200\">\r\n            <p className={`text-sm ${darkMode ? 'text-gray-400' : 'text-gray-600'}`}>\r\n              Need help?{' '}\r\n              <button className=\"text-blue-600 hover:text-blue-500 underline\">\r\n                Contact Support\r\n              </button>\r\n            </p>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default OrganizationVerification;"],"names":["OrganizationVerification","setCurrentPage","darkMode","t","useTranslation","status","setStatus","useState","message","setMessage","organizationData","setOrganizationData","resendLoading","setResendLoading","useEffect","token","data","error","handleResendVerification","email","jsx","jsxs","Fragment"],"mappings":"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"}