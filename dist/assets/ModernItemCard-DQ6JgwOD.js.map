{"version":3,"file":"ModernItemCard-DQ6JgwOD.js","sources":["../../src/components/ModernItemCard.jsx"],"sourcesContent":["import { useTranslation } from 'react-i18next';\r\nimport { Eye, Mail, Trash2, CheckCircle, MapPin, Calendar, Tag } from 'lucide-react';\r\n\r\nconst ModernItemCard = ({ \r\n  item, \r\n  isLoggedIn, \r\n  userRole, \r\n  onViewDetails, \r\n  onClaim, \r\n  onDelete, \r\n  onContact,\r\n  darkMode \r\n}) => {\r\n  const { t, i18n } = useTranslation();\r\n\r\n  // Helper function to get translated text for mock items\r\n  const getTranslatedText = (field, originalText) => {\r\n    // Check if this is a mock item by looking for translation key\r\n    if (item.translationKey) {\r\n      const key = `mockItems.${item.translationKey}.${field}`;\r\n      const translated = t(key);\r\n      // If translation exists and is different from the key, use it\r\n      if (translated && translated !== key) {\r\n        return translated;\r\n      }\r\n    }\r\n    // Otherwise return original text (for real user data)\r\n    return originalText;\r\n  };\r\n  \r\n  // Force component to be aware of language changes\r\n  const currentLang = i18n.language;\r\n\r\n  const formatDate = (dateString) => {\r\n    const date = new Date(dateString);\r\n    const now = new Date();\r\n    const diffTime = Math.abs(now - date);\r\n    const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));\r\n    \r\n    if (diffDays === 1) return t('time.today');\r\n    if (diffDays === 2) return t('time.yesterday');\r\n    if (diffDays <= 7) return t('time.daysAgo', { count: diffDays });\r\n    return date.toLocaleDateString();\r\n  };\r\n\r\n  return (\r\n    <div className={`${darkMode ? 'bg-gray-800 border-gray-700' : 'bg-white border-gray-100'} rounded-2xl shadow-sm hover:shadow-lg transition-all duration-300 overflow-hidden border group`}>\r\n      {/* Image Section */}\r\n      <div className={`relative aspect-w-16 aspect-h-9 ${darkMode ? 'bg-gray-700' : 'bg-gray-100'}`}>\r\n        {item.imageUrl && item.imageUrl !== 'local_preview' ? (\r\n          <>\r\n            <img \r\n              src={item.imageUrl} \r\n              alt={getTranslatedText('title', item.title)}\r\n              className=\"w-full h-48 object-cover group-hover:scale-105 transition-transform duration-300\"\r\n              onError={(e) => {\r\n                // If image fails to load, hide it and show fallback\r\n                console.warn('Image failed to load:', item.imageUrl);\r\n                e.target.style.display = 'none';\r\n                const fallback = e.target.parentNode.querySelector('.image-fallback');\r\n                if (fallback) fallback.style.display = 'flex';\r\n              }}\r\n              onLoad={(e) => {\r\n                // If image loads successfully, hide fallback\r\n                const fallback = e.target.parentNode.querySelector('.image-fallback');\r\n                if (fallback) fallback.style.display = 'none';\r\n              }}\r\n            />\r\n            {/* Fallback placeholder - shown if image fails to load */}\r\n            <div \r\n              className={`image-fallback absolute inset-0 w-full h-48 ${darkMode ? 'bg-gradient-to-br from-gray-700 to-gray-800' : 'bg-gradient-to-br from-gray-100 to-gray-200'} flex items-center justify-center hidden`}\r\n            >\r\n              <div className=\"text-center\">\r\n                <div className=\"text-4xl mb-2\"></div>\r\n                <p className={`text-sm ${darkMode ? 'text-gray-400' : 'text-gray-500'} capitalize`}>{t(`categories.${item.category}`)}</p>\r\n                <p className={`text-xs ${darkMode ? 'text-gray-500' : 'text-gray-400'} mt-1`}>Image not available</p>\r\n              </div>\r\n            </div>\r\n          </>\r\n        ) : (\r\n          <div className={`w-full h-48 ${darkMode ? 'bg-gradient-to-br from-gray-700 to-gray-800' : 'bg-gradient-to-br from-gray-100 to-gray-200'} flex items-center justify-center`}>\r\n            <div className=\"text-center\">\r\n              <div className=\"text-4xl mb-2\"></div>\r\n              <p className={`text-sm ${darkMode ? 'text-gray-400' : 'text-gray-500'} capitalize`}>{t(`categories.${item.category}`)}</p>\r\n            </div>\r\n          </div>\r\n        )}\r\n        \r\n        {/* Status Badge */}\r\n        <div className=\"absolute top-3 left-3\">\r\n          <span className={`px-3 py-1 rounded-full text-xs font-semibold shadow-sm ${\r\n            item.status === 'Lost' \r\n              ? 'bg-red-100 text-red-700 border border-red-200' \r\n              : 'bg-green-100 text-green-700 border border-green-200'\r\n          }`}>\r\n            {t(`status.${item.status.toLowerCase()}`)}\r\n          </span>\r\n        </div>\r\n\r\n        {/* Claimed Badge */}\r\n        {item.claimed && (\r\n          <div className=\"absolute top-3 right-3\">\r\n            <span className=\"px-3 py-1 rounded-full text-xs font-semibold bg-blue-100 text-blue-700 border border-blue-200 shadow-sm flex items-center\">\r\n              <CheckCircle className=\"h-3 w-3 mr-1\" />\r\n              {t('status.claimed')}\r\n            </span>\r\n          </div>\r\n        )}\r\n\r\n        {/* Quick Actions Overlay */}\r\n        <div className=\"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-20 transition-all duration-300 flex items-center justify-center opacity-0 group-hover:opacity-100\">\r\n          <button\r\n            onClick={(e) => {\r\n              e.preventDefault();\r\n              e.stopPropagation();\r\n              console.log('ðŸ” View Details clicked for item:', item);\r\n              \r\n              // Try multiple approaches to ensure it works\r\n              if (onViewDetails) {\r\n                onViewDetails(item);\r\n              } else {\r\n                // Fallback: Create a custom event to trigger navigation\r\n                const event = new CustomEvent('viewItemDetails', { \r\n                  detail: { item: item }\r\n                });\r\n                window.dispatchEvent(event);\r\n              }\r\n            }}\r\n            className={`${darkMode ? 'bg-gray-800 text-white hover:bg-gray-700' : 'bg-white text-gray-900 hover:bg-gray-50'} px-4 py-2 rounded-lg font-medium shadow-lg transition-colors flex items-center space-x-2 focus:outline-none focus:ring-2 focus:ring-blue-500`}\r\n          >\r\n            <Eye className=\"h-5 w-5\" />\r\n            <span>{t('items.viewDetails') || 'View Details'}</span>\r\n          </button>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Content Section */}\r\n      <div className=\"p-6\">\r\n        {/* Header */}\r\n        <div className=\"flex items-start justify-between mb-3\">\r\n          <h3 className={`font-semibold ${darkMode ? 'text-white' : 'text-gray-900'} text-lg leading-tight line-clamp-2`}>\r\n            {getTranslatedText('title', item.title)}\r\n          </h3>\r\n          <div className={`flex items-center text-xs ${darkMode ? 'text-gray-400' : 'text-gray-500'} ml-3`}>\r\n            <Calendar className=\"h-3 w-3 mr-1\" />\r\n            {formatDate(item.date || item.createdAt)}\r\n          </div>\r\n        </div>\r\n\r\n        {/* Description */}\r\n        <p className={`${darkMode ? 'text-gray-300' : 'text-gray-600'} text-sm mb-4 line-clamp-2`}>\r\n          {getTranslatedText('description', item.description)}\r\n        </p>\r\n\r\n        {/* Location */}\r\n        <div className={`flex items-center text-sm ${darkMode ? 'text-gray-400' : 'text-gray-500'} mb-4`}>\r\n          <MapPin className=\"h-4 w-4 mr-1\" />\r\n          <span>{getTranslatedText('location', item.location)}</span>\r\n        </div>\r\n\r\n        {/* Category */}\r\n        <div className=\"flex items-center justify-between mb-4\">\r\n          <span className={`inline-flex items-center px-3 py-1 rounded-full text-xs font-medium ${darkMode ? 'bg-gray-700 text-gray-300' : 'bg-gray-100 text-gray-700'}`}>\r\n            <Tag className=\"h-3 w-3 mr-1\" />\r\n            {t(`categories.${item.category}`)}\r\n          </span>\r\n        </div>\r\n\r\n        {/* Actions */}\r\n        <div className={`flex items-center justify-between pt-4 border-t ${darkMode ? 'border-gray-700' : 'border-gray-100'}`}>\r\n          {/* Contact Actions */}\r\n          <div className=\"flex items-center space-x-3\">\r\n            {isLoggedIn && (\r\n              <button\r\n                onClick={() => onContact && onContact(item)}\r\n                className={`flex items-center ${darkMode ? 'text-gray-400 hover:text-blue-400' : 'text-gray-600 hover:text-blue-600'} transition-colors`}\r\n              >\r\n                <Mail className=\"h-4 w-4 mr-1\" />\r\n                <span className=\"text-sm\">{t('items.contact')}</span>\r\n              </button>\r\n            )}\r\n          </div>\r\n\r\n          {/* Action Buttons */}\r\n          <div className=\"flex items-center space-x-2\">\r\n            {isLoggedIn && !item.claimed && onClaim && (\r\n              <button\r\n                onClick={() => onClaim(item._id || item.id)}\r\n                className={`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${\r\n                  item.status === 'Lost'\r\n                    ? 'bg-green-600 text-white hover:bg-green-700'\r\n                    : 'bg-blue-600 text-white hover:bg-blue-700'\r\n                }`}\r\n              >\r\n                {item.status === 'Lost' ? t('items.iFoundThis') : t('items.thisIsMine')}\r\n              </button>\r\n            )}\r\n\r\n            {/* Report Item Button for Users */}\r\n            {isLoggedIn && (\r\n              <button\r\n                onClick={() => {\r\n                  const reportReason = prompt('Report this item to admin:\\n\\n1. Incorrect information\\n2. Inappropriate content\\n3. Already returned\\n4. Other issue\\n\\nPlease describe the issue:');\r\n                  if (reportReason) {\r\n                    window.location.href = `mailto:admin@platform.com?subject=Item Report - ${item.title}&body=Hello Admin,%0D%0A%0D%0AI want to report an issue with this item:%0D%0A%0D%0AItem: ${encodeURIComponent(item.title)}%0D%0AItem ID: ${encodeURIComponent(item._id || item.id)}%0D%0ALocation: ${encodeURIComponent(item.location)}%0D%0AStatus: ${item.status}%0D%0A%0D%0AReported by: ${item.owner?.name || 'User'}%0D%0AIssue: ${encodeURIComponent(reportReason)}%0D%0A%0D%0APlease review this item.%0D%0A%0D%0AThank you!`;\r\n                  }\r\n                }}\r\n                className=\"px-3 py-2 text-xs bg-yellow-100 text-yellow-700 rounded-lg hover:bg-yellow-200 transition-colors\"\r\n                title=\"Report issue with this item\"\r\n              >\r\n                ðŸš¨ Report\r\n              </button>\r\n            )}\r\n\r\n            {userRole === 'admin' && onDelete && (\r\n              <button\r\n                onClick={() => onDelete(item._id || item.id)}\r\n                className={`p-2 rounded-lg transition-colors ${darkMode ? 'text-red-400 hover:bg-red-900/20' : 'text-red-600 hover:bg-red-50'}`}\r\n              >\r\n                <Trash2 className=\"h-4 w-4\" />\r\n              </button>\r\n            )}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ModernItemCard;"],"names":["ModernItemCard","item","isLoggedIn","userRole","onViewDetails","onClaim","onDelete","onContact","darkMode","t","i18n","useTranslation","getTranslatedText","field","originalText","key","translated","formatDate","dateString","date","diffTime","diffDays","jsxs","Fragment","jsx","e","fallback","CheckCircle","event","Eye","Calendar","MapPin","Tag","Mail","reportReason","_a","Trash2"],"mappings":"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"}