import{r as c,j as e}from"./index-Iy8zicZ9.js";const A=({darkMode:t=!1,currentUser:C})=>{const[u,v]=c.useState([]),[p,y]=c.useState(!1),[b,h]=c.useState(null),[o,f]=c.useState(null),[a,N]=c.useState({currentPage:1,totalPages:1,totalOrders:0,hasNext:!1,hasPrev:!1}),[l,j]=c.useState({search:"",status:"all",sortBy:"createdAt",sortOrder:"desc"}),w={pending:"bg-yellow-100 text-yellow-800",confirmed:"bg-blue-100 text-blue-800",processing:"bg-purple-100 text-purple-800",shipped:"bg-indigo-100 text-indigo-800",delivered:"bg-green-100 text-green-800",cancelled:"bg-red-100 text-red-800"},d=async(s=1)=>{y(!0),h(null);try{const n=localStorage.getItem("token")||"admin-token",r=new URLSearchParams({page:s.toString(),limit:"10",sortBy:l.sortBy,sortOrder:l.sortOrder});l.search&&r.append("search",l.search),l.status!=="all"&&r.append("status",l.status);const i=await(await fetch(`/api/simple-orders?${r}`,{headers:{Authorization:`Bearer ${n}`,"Content-Type":"application/json"}})).json();i.success?(v(i.data),N(i.pagination)):h(i.message)}catch(n){h(n.message)}finally{y(!1)}},$=async()=>{try{const s=localStorage.getItem("token")||"admin-token",r=await(await fetch("/api/simple-orders/stats",{headers:{Authorization:`Bearer ${s}`,"Content-Type":"application/json"}})).json();r.success&&f(r.data)}catch(s){console.error("Error fetching stats:",s)}},S=async(s,n)=>{try{const r=localStorage.getItem("token")||"admin-token",i=await(await fetch(`/api/simple-orders/${s}/status`,{method:"PUT",headers:{Authorization:`Bearer ${r}`,"Content-Type":"application/json"},body:JSON.stringify({status:n})})).json();i.success?d(a.currentPage):alert(`Error: ${i.message}`)}catch(r){alert(`Network error: ${r.message}`)}},x=s=>{const n=l.sortBy===s&&l.sortOrder==="asc"?"desc":"asc";j(r=>({...r,sortBy:s,sortOrder:n}))},m=(s,n)=>{j(r=>({...r,[s]:n}))};c.useEffect(()=>{d(1),$()},[l]);const g=s=>l.sortBy!==s?e.jsx("span",{className:"text-gray-400",children:"↕"}):l.sortOrder==="asc"?e.jsx("span",{className:"text-blue-600",children:"↑"}):e.jsx("span",{className:"text-blue-600",children:"↓"}),O=s=>e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${w[s]}`,children:s.charAt(0).toUpperCase()+s.slice(1)});return e.jsx("div",{className:`min-h-screen ${t?"bg-gray-900":"bg-gray-50"}`,children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:`text-3xl font-bold ${t?"text-white":"text-gray-900"}`,children:"Simple Orders Management"}),e.jsx("p",{className:`mt-2 ${t?"text-gray-400":"text-gray-600"}`,children:"MongoDB Sorting & Pagination Demo"})]}),o&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[e.jsx("div",{className:`${t?"bg-gray-800":"bg-white"} rounded-lg shadow p-6`,children:e.jsx("div",{className:"flex items-center",children:e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:`text-sm font-medium ${t?"text-gray-400":"text-gray-500"}`,children:"Total Orders"}),e.jsx("p",{className:`text-2xl font-bold ${t?"text-white":"text-gray-900"}`,children:o.totalOrders})]})})}),e.jsx("div",{className:`${t?"bg-gray-800":"bg-white"} rounded-lg shadow p-6`,children:e.jsx("div",{className:"flex items-center",children:e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:`text-sm font-medium ${t?"text-gray-400":"text-gray-500"}`,children:"Total Revenue"}),e.jsxs("p",{className:`text-2xl font-bold ${t?"text-white":"text-gray-900"}`,children:["$",o.totalRevenue.toFixed(2)]})]})})}),e.jsx("div",{className:`${t?"bg-gray-800":"bg-white"} rounded-lg shadow p-6`,children:e.jsx("div",{className:"flex items-center",children:e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:`text-sm font-medium ${t?"text-gray-400":"text-gray-500"}`,children:"Pending Orders"}),e.jsx("p",{className:`text-2xl font-bold ${t?"text-white":"text-gray-900"}`,children:o.pendingOrders})]})})}),e.jsx("div",{className:`${t?"bg-gray-800":"bg-white"} rounded-lg shadow p-6`,children:e.jsx("div",{className:"flex items-center",children:e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:`text-sm font-medium ${t?"text-gray-400":"text-gray-500"}`,children:"Completed"}),e.jsx("p",{className:`text-2xl font-bold ${t?"text-white":"text-gray-900"}`,children:o.completedOrders})]})})})]}),e.jsx("div",{className:`mb-6 p-6 rounded-lg ${t?"bg-gray-800":"bg-white"} shadow`,children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium ${t?"text-gray-300":"text-gray-700"} mb-1`,children:"Search"}),e.jsx("div",{className:"relative",children:e.jsx("input",{type:"text",value:l.search,onChange:s=>m("search",s.target.value),placeholder:"Order ID, customer...",className:`w-full rounded-md border ${t?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300 text-gray-900"} px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500`})})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium ${t?"text-gray-300":"text-gray-700"} mb-1`,children:"Status"}),e.jsxs("select",{value:l.status,onChange:s=>m("status",s.target.value),className:`w-full rounded-md border ${t?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300 text-gray-900"} px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500`,children:[e.jsx("option",{value:"all",children:"All Statuses"}),e.jsx("option",{value:"pending",children:"Pending"}),e.jsx("option",{value:"confirmed",children:"Confirmed"}),e.jsx("option",{value:"processing",children:"Processing"}),e.jsx("option",{value:"shipped",children:"Shipped"}),e.jsx("option",{value:"delivered",children:"Delivered"}),e.jsx("option",{value:"cancelled",children:"Cancelled"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium ${t?"text-gray-300":"text-gray-700"} mb-1`,children:"Sort By"}),e.jsxs("select",{value:l.sortBy,onChange:s=>m("sortBy",s.target.value),className:`w-full rounded-md border ${t?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300 text-gray-900"} px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500`,children:[e.jsx("option",{value:"createdAt",children:"Date Created"}),e.jsx("option",{value:"totalPrice",children:"Total Price"}),e.jsx("option",{value:"status",children:"Status"}),e.jsx("option",{value:"orderId",children:"Order ID"}),e.jsx("option",{value:"customer",children:"Customer"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium ${t?"text-gray-300":"text-gray-700"} mb-1`,children:"Sort Order"}),e.jsxs("select",{value:l.sortOrder,onChange:s=>m("sortOrder",s.target.value),className:`w-full rounded-md border ${t?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300 text-gray-900"} px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500`,children:[e.jsx("option",{value:"desc",children:"Newest First"}),e.jsx("option",{value:"asc",children:"Oldest First"})]})]})]})}),b&&e.jsx("div",{className:"mb-6 bg-red-50 border border-red-200 rounded-md p-4",children:e.jsx("div",{className:"flex",children:e.jsxs("div",{className:"ml-3",children:[e.jsx("h3",{className:"text-sm font-medium text-red-800",children:"Error"}),e.jsx("p",{className:"mt-1 text-sm text-red-700",children:b})]})})}),e.jsxs("div",{className:`rounded-lg ${t?"bg-gray-800":"bg-white"} shadow overflow-hidden`,children:[p?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:t?"bg-gray-700":"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:`px-6 py-3 text-left text-xs font-medium uppercase tracking-wider cursor-pointer hover:bg-gray-100 ${t?"text-gray-300 hover:bg-gray-600":"text-gray-500"}`,onClick:()=>x("orderId"),children:e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx("span",{children:"Order ID"}),g("orderId")]})}),e.jsx("th",{className:`px-6 py-3 text-left text-xs font-medium uppercase tracking-wider cursor-pointer hover:bg-gray-100 ${t?"text-gray-300 hover:bg-gray-600":"text-gray-500"}`,onClick:()=>x("createdAt"),children:e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx("span",{children:"Date"}),g("createdAt")]})}),e.jsx("th",{className:`px-6 py-3 text-left text-xs font-medium uppercase tracking-wider cursor-pointer hover:bg-gray-100 ${t?"text-gray-300 hover:bg-gray-600":"text-gray-500"}`,onClick:()=>x("customer"),children:e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx("span",{children:"Customer"}),g("customer")]})}),e.jsx("th",{className:`px-6 py-3 text-left text-xs font-medium uppercase tracking-wider cursor-pointer hover:bg-gray-100 ${t?"text-gray-300 hover:bg-gray-600":"text-gray-500"}`,onClick:()=>x("totalPrice"),children:e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx("span",{children:"Total"}),g("totalPrice")]})}),e.jsx("th",{className:`px-6 py-3 text-left text-xs font-medium uppercase tracking-wider cursor-pointer hover:bg-gray-100 ${t?"text-gray-300 hover:bg-gray-600":"text-gray-500"}`,onClick:()=>x("status"),children:e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx("span",{children:"Status"}),g("status")]})}),e.jsx("th",{className:`px-6 py-3 text-left text-xs font-medium uppercase tracking-wider ${t?"text-gray-300":"text-gray-500"}`,children:"Actions"})]})}),e.jsx("tbody",{className:`divide-y ${t?"divide-gray-700":"divide-gray-200"}`,children:u.map(s=>e.jsxs("tr",{className:t?"hover:bg-gray-700":"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:`text-sm font-medium ${t?"text-white":"text-gray-900"}`,children:s.orderId})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:`text-sm ${t?"text-gray-300":"text-gray-900"}`,children:new Date(s.date).toLocaleDateString()})}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[e.jsx("div",{className:`text-sm font-medium ${t?"text-white":"text-gray-900"}`,children:s.customer}),e.jsx("div",{className:`text-sm ${t?"text-gray-400":"text-gray-500"}`,children:s.email})]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:`text-sm font-medium ${t?"text-white":"text-gray-900"}`,children:["$",s.totalPrice.toFixed(2)]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:O(s.status)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:e.jsxs("select",{value:s.status,onChange:n=>S(s.id,n.target.value),className:`text-xs rounded border ${t?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300 text-gray-900"} px-2 py-1 focus:outline-none focus:ring-1 focus:ring-blue-500`,children:[e.jsx("option",{value:"pending",children:"Pending"}),e.jsx("option",{value:"confirmed",children:"Confirmed"}),e.jsx("option",{value:"processing",children:"Processing"}),e.jsx("option",{value:"shipped",children:"Shipped"}),e.jsx("option",{value:"delivered",children:"Delivered"}),e.jsx("option",{value:"cancelled",children:"Cancelled"})]})})]},s.id))})]})}),!p&&u.length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx("h3",{className:`mt-2 text-sm font-medium ${t?"text-gray-300":"text-gray-900"}`,children:"No orders found"}),e.jsx("p",{className:`mt-1 text-sm ${t?"text-gray-400":"text-gray-500"}`,children:"No orders match your current filters."})]})]}),a.totalPages>1&&e.jsxs("div",{className:"mt-6 flex items-center justify-between",children:[e.jsxs("div",{className:`text-sm ${t?"text-gray-400":"text-gray-700"}`,children:["Showing ",(a.currentPage-1)*10+1," to"," ",Math.min(a.currentPage*10,a.totalOrders)," of"," ",a.totalOrders," orders"]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>d(a.currentPage-1),disabled:!a.hasPrev,className:`px-3 py-2 rounded-md text-sm font-medium ${a.hasPrev?t?"bg-gray-700 text-gray-300 hover:bg-gray-600":"bg-white text-gray-700 hover:bg-gray-50 border border-gray-300":"bg-gray-100 text-gray-400 cursor-not-allowed"}`,children:"Previous"}),Array.from({length:Math.min(5,a.totalPages)},(s,n)=>{const r=Math.max(1,a.currentPage-2)+n;return r>a.totalPages?null:e.jsx("button",{onClick:()=>d(r),className:`px-3 py-2 rounded-md text-sm font-medium ${r===a.currentPage?"bg-blue-600 text-white":t?"bg-gray-700 text-gray-300 hover:bg-gray-600":"bg-white text-gray-700 hover:bg-gray-50 border border-gray-300"}`,children:r},r)}),e.jsx("button",{onClick:()=>d(a.currentPage+1),disabled:!a.hasNext,className:`px-3 py-2 rounded-md text-sm font-medium ${a.hasNext?t?"bg-gray-700 text-gray-300 hover:bg-gray-600":"bg-white text-gray-700 hover:bg-gray-50 border border-gray-300":"bg-gray-100 text-gray-400 cursor-not-allowed"}`,children:"Next"})]})]})]})})};export{A as default};
//# sourceMappingURL=SimpleAdminOrders-AbGn3_k0.js.map
