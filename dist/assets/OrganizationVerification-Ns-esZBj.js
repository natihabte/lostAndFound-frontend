import{u as b,r as i,j as e}from"./index-Iy8zicZ9.js";const v=({setCurrentPage:m,darkMode:t})=>{const{t:j}=b(),[c,r]=i.useState("verifying"),[d,n]=i.useState(""),[s,y]=i.useState(null),[u,g]=i.useState(!1);i.useEffect(()=>{(async()=>{const a=new URLSearchParams(window.location.search).get("token");if(!a){r("error"),n("Invalid verification link");return}try{const l=await(await fetch("http://localhost:5001/api/organizations/verify-email",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:a})})).json();l.success?(r("success"),n(l.message),y(l.data)):(r("error"),n(l.message))}catch(h){console.error("Verification error:",h),r("error"),n("Failed to verify email. Please try again.")}})()},[]);const f=async()=>{const o=prompt("Please enter your admin email address:");if(o){g(!0);try{const a=await(await fetch("http://localhost:5001/api/organizations/resend-verification",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:o})})).json();a.success?alert("Verification email sent successfully! Please check your inbox."):alert(a.message||"Failed to send verification email")}catch(x){console.error("Resend error:",x),alert("Failed to send verification email. Please try again.")}finally{g(!1)}}};return e.jsx("div",{className:`min-h-screen ${t?"bg-gray-900":"bg-gray-50"} py-12`,children:e.jsx("div",{className:"max-w-2xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:`${t?"bg-gray-800":"bg-white"} rounded-2xl shadow-xl p-8 text-center`,children:[c==="verifying"&&e.jsxs("div",{children:[e.jsx("div",{className:"flex justify-center mb-6",children:e.jsx("div",{className:"h-16 w-16 bg-blue-100 rounded-full flex items-center justify-center"})}),e.jsx("h1",{className:`text-2xl font-bold ${t?"text-white":"text-gray-900"} mb-4`,children:"Verifying Your Email"}),e.jsx("p",{className:`${t?"text-gray-300":"text-gray-600"}`,children:"Please wait while we verify your email address..."})]}),c==="success"&&e.jsxs("div",{children:[e.jsx("div",{className:"flex justify-center mb-6",children:e.jsx("div",{className:"h-16 w-16 bg-green-100 rounded-full flex items-center justify-center"})}),e.jsx("h1",{className:`text-2xl font-bold ${t?"text-white":"text-gray-900"} mb-4`,children:"Email Verified Successfully!"}),e.jsx("p",{className:`${t?"text-gray-300":"text-gray-600"} mb-6`,children:d}),s&&e.jsxs("div",{className:`${t?"bg-gray-700":"bg-gray-50"} rounded-lg p-6 mb-6`,children:[e.jsx("h3",{className:`text-lg font-medium ${t?"text-white":"text-gray-900"} mb-4`,children:"Organization Details"}),e.jsxs("div",{className:"text-left space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:`${t?"text-gray-400":"text-gray-500"}`,children:"Organization:"}),e.jsx("span",{className:`${t?"text-white":"text-gray-900"} font-medium`,children:s.organization.name})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:`${t?"text-gray-400":"text-gray-500"}`,children:"Admin:"}),e.jsx("span",{className:`${t?"text-white":"text-gray-900"} font-medium`,children:s.user.name})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:`${t?"text-gray-400":"text-gray-500"}`,children:"Status:"}),e.jsx("span",{className:`${s.organization.status==="active"?"text-green-600":"text-yellow-600"} font-medium`,children:s.organization.status==="active"?"Active":"Pending Approval"})]})]})]}),e.jsx("div",{className:`${t?"bg-blue-900/20 border-blue-700":"bg-blue-50 border-blue-200"} border rounded-lg p-4 mb-6`,children:e.jsx("div",{className:"flex items-start",children:e.jsxs("div",{className:"text-left",children:[e.jsx("h4",{className:`text-sm font-medium ${t?"text-blue-300":"text-blue-900"} mb-2`,children:"What's Next?"}),e.jsxs("ul",{className:`text-xs ${t?"text-blue-200":"text-blue-700"} space-y-1`,children:[e.jsx("li",{children:"• Your organization is now pending approval"}),e.jsx("li",{children:"• Our team will review your application within 24-48 hours"}),e.jsx("li",{children:"• You'll receive an email notification once approved"}),e.jsx("li",{children:"• After approval, you can start your 14-day free trial"})]})]})})}),e.jsx("button",{onClick:()=>m("login"),className:"w-full bg-blue-600 text-white py-3 px-6 rounded-lg font-medium hover:bg-blue-700 transition-colors flex items-center justify-center",children:"Continue to Login"})]}),c==="error"&&e.jsxs("div",{children:[e.jsx("div",{className:"flex justify-center mb-6",children:e.jsx("div",{className:"h-16 w-16 bg-red-100 rounded-full flex items-center justify-center"})}),e.jsx("h1",{className:`text-2xl font-bold ${t?"text-white":"text-gray-900"} mb-4`,children:"Verification Failed"}),e.jsx("p",{className:`${t?"text-gray-300":"text-gray-600"} mb-6`,children:d}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("button",{onClick:f,disabled:u,className:"w-full bg-blue-600 text-white py-3 px-6 rounded-lg font-medium hover:bg-blue-700 disabled:opacity-50 transition-colors flex items-center justify-center",children:u?e.jsx(e.Fragment,{children:"Sending..."}):e.jsx(e.Fragment,{children:"Resend Verification Email"})}),e.jsx("button",{onClick:()=>m("public-sector-registration"),className:`w-full border py-3 px-6 rounded-lg font-medium transition-colors ${t?"border-gray-600 text-gray-300 hover:bg-gray-700":"border-gray-300 text-gray-700 hover:bg-gray-50"}`,children:"Register New Organization"})]})]}),e.jsx("div",{className:"mt-8 pt-6 border-t border-gray-200",children:e.jsxs("p",{className:`text-sm ${t?"text-gray-400":"text-gray-600"}`,children:["Need help?"," ",e.jsx("button",{className:"text-blue-600 hover:text-blue-500 underline",children:"Contact Support"})]})})]})})})};export{v as default};
//# sourceMappingURL=OrganizationVerification-Ns-esZBj.js.map
