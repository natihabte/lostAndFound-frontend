const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-Iy8zicZ9.js","assets/index-DORVt_Xd.css"])))=>i.map(i=>d[i]);
import{c as F,a as U,u as q,r as i,j as e,X as _,_ as M}from"./index-Iy8zicZ9.js";import{T as C}from"./tag-r4h69r7g.js";import{M as $}from"./map-pin-Bs7t3nXu.js";import{F as H}from"./file-text-DdwBK8o7.js";import{S as R}from"./save-DcLI36z6.js";/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],z=F("image",B);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],V=F("upload",I),Y=({onSubmit:P,currentUser:c,editingItem:s,selectedOrganization:d})=>{const g=U(),{t:a}=q(),[l,o]=i.useState({title:(s==null?void 0:s.title)||"",description:(s==null?void 0:s.description)||"",category:(s==null?void 0:s.category)||"electronic",status:(s==null?void 0:s.status)||"Lost",location:(s==null?void 0:s.location)||"",contact:(s==null?void 0:s.contact)||(c==null?void 0:c.email)||"",phone:(s==null?void 0:s.phone)||(c==null?void 0:c.phone)||"",imageUrl:(s==null?void 0:s.imageUrl)||""}),[W,f]=i.useState(null),[j,y]=i.useState((s==null?void 0:s.imageUrl)||null),[x,v]=i.useState(!1),[N,w]=i.useState(!1),[u,n]=i.useState(""),L=[{value:"electronic",label:a("categories.electronic")},{value:"clothing",label:a("categories.clothing")},{value:"accessory",label:a("categories.accessory")},{value:"document",label:a("categories.document")},{value:"book",label:a("categories.book")},{value:"other",label:a("categories.other")}],T=async r=>{const t=r.target.files[0];if(!t)return;if(t.size>5*1024*1024){n(a("addItem.errors.imageSizeLimit"));return}if(!t.type.startsWith("image/")){n(a("addItem.errors.invalidImageType"));return}f(t),n("");const b=new FileReader;b.onloadend=()=>{const S=b.result;y(S),v(!0),(async()=>{try{const{uploadAPI:h}=await M(async()=>{const{uploadAPI:p}=await import("./index-Iy8zicZ9.js").then(E=>E.i);return{uploadAPI:p}},__vite__mapDeps([0,1])),m=await h.uploadImage(t);o(p=>({...p,imageUrl:m.data.url})),console.log("âœ… Image uploaded successfully:",m.data.url)}catch(h){console.warn("âš ï¸ Image upload failed, using local preview:",h),o(m=>({...m,imageUrl:S}))}finally{v(!1)}})()},b.readAsDataURL(t)},D=async r=>{if(r.preventDefault(),!l.title.trim()||!l.description.trim()||!l.location.trim()){n(a("addItem.errors.requiredFields"));return}w(!0),n("");try{const t={...l,...d&&{organizationId:d.id}};await P(t),g(-1)}catch(t){n(t.message||a("addItem.errors.submitFailed"))}finally{w(!1)}},A=()=>{f(null),y(null),o(r=>({...r,imageUrl:""}))},k=()=>{g(-1)};return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:a(s?"addItem.editTitle":"addItem.postTitle")}),e.jsx("p",{className:"text-gray-600 mt-1",children:a(s?"addItem.editSubtitle":"addItem.postSubtitle")})]}),e.jsx("button",{onClick:k,className:"p-2 hover:bg-gray-100 rounded-xl transition-colors",children:e.jsx(_,{className:"h-5 w-5"})})]}),e.jsxs("form",{onSubmit:D,className:"p-6 space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:a("addItem.whatHappened")}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("button",{type:"button",onClick:()=>o(r=>({...r,status:"Lost"})),className:`p-4 rounded-xl border-2 transition-all ${l.status==="Lost"?"border-red-500 bg-red-50 text-red-700":"border-gray-200 hover:border-red-300"}`,children:[e.jsx("div",{className:"text-2xl mb-2",children:"ðŸ˜¢"}),e.jsx("div",{className:"font-medium",children:a("addItem.lostSomething")}),e.jsx("div",{className:"text-sm text-gray-600",children:a("addItem.reportLost")})]}),e.jsxs("button",{type:"button",onClick:()=>o(r=>({...r,status:"Found"})),className:`p-4 rounded-xl border-2 transition-all ${l.status==="Found"?"border-green-500 bg-green-50 text-green-700":"border-gray-200 hover:border-green-300"}`,children:[e.jsx("div",{className:"font-medium",children:a("addItem.foundSomething")}),e.jsx("div",{className:"text-sm text-gray-600",children:a("addItem.reportFound")})]})]})]}),!d&&e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2 flex items-center",children:[e.jsx(C,{className:"h-4 w-4 mr-2"}),a("addItem.selectOrganization")," (Optional)"]}),e.jsxs("select",{value:l.organizationId||"",onChange:r=>o(t=>({...t,organizationId:r.target.value})),className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"",children:a("addItem.noOrganization")}),e.jsx("option",{value:"org_1",children:"Addis Ababa University"}),e.jsx("option",{value:"org_2",children:"Hawassa University"}),e.jsx("option",{value:"org_3",children:"Black Lion Hospital"})]})]}),d&&e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-xl p-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("img",{src:d.logo,alt:d.name,className:"w-12 h-12 rounded-lg object-cover mr-3"}),e.jsxs("div",{children:[e.jsxs("p",{className:"font-medium text-blue-900",children:[a("addItem.postingTo"),": ",d.name]}),e.jsx("p",{className:"text-sm text-blue-600",children:d.location})]})]})}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[a("addItem.itemTitle")," *"]}),e.jsx("input",{type:"text",value:l.title,onChange:r=>o(t=>({...t,title:r.target.value})),className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:a("addItem.titlePlaceholder"),required:!0})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2 flex items-center",children:[e.jsx(C,{className:"h-4 w-4 mr-2"}),a("items.category")," *"]}),e.jsx("div",{className:"grid grid-cols-3 gap-3",children:L.map(r=>e.jsxs("button",{type:"button",onClick:()=>o(t=>({...t,category:r.value})),className:`p-3 rounded-xl border-2 transition-all text-center ${l.category===r.value?"border-blue-500 bg-blue-50 text-blue-700":"border-gray-200 hover:border-blue-300"}`,children:[e.jsx("div",{className:"text-xl mb-1"}),e.jsx("div",{className:"text-sm font-medium",children:r.label})]},r.value))})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2 flex items-center",children:[e.jsx($,{className:"h-4 w-4 mr-2"}),a("items.location")," *"]}),e.jsx("input",{type:"text",value:l.location,onChange:r=>o(t=>({...t,location:r.target.value})),className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:a("addItem.locationPlaceholder"),required:!0})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2 flex items-center",children:[e.jsx(H,{className:"h-4 w-4 mr-2"}),a("items.description")," *"]}),e.jsx("textarea",{value:l.description,onChange:r=>o(t=>({...t,description:r.target.value})),rows:"4",className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-none",placeholder:a("addItem.descriptionPlaceholder"),required:!0})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2 flex items-center",children:[e.jsx(z,{className:"h-4 w-4 mr-2"}),a("addItem.photo")," (Optional)"]}),j?e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:j,alt:"Preview",className:"w-full h-48 object-cover rounded-xl border border-gray-200"}),e.jsx("button",{type:"button",onClick:A,className:"absolute top-2 right-2 p-1 bg-red-500 text-white rounded-full hover:bg-red-600 transition-colors",children:e.jsx(_,{className:"h-4 w-4"})}),x&&e.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-50 flex items-center justify-center rounded-xl",children:e.jsx("div",{className:"text-white text-sm",children:a("addItem.uploading")})})]}):e.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-xl p-6 text-center hover:border-blue-400 transition-colors",children:[e.jsx("input",{type:"file",accept:"image/*",onChange:T,className:"hidden",id:"image-upload",disabled:x}),e.jsxs("label",{htmlFor:"image-upload",className:"cursor-pointer",children:[e.jsx(V,{className:"h-12 w-12 mx-auto mb-3 text-gray-400"}),e.jsxs("p",{className:"text-sm text-gray-600 mb-1",children:[e.jsx("span",{className:"font-medium text-blue-600",children:a("addItem.clickToUpload")})," ",a("addItem.orDragDrop")]}),e.jsx("p",{className:"text-xs text-gray-500",children:a("addItem.imageFormats")}),e.jsx("p",{className:"text-xs text-green-600 mt-1",children:"Upload works with local preview"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:a("addItem.contactEmail")}),e.jsx("input",{type:"email",value:l.contact,onChange:r=>o(t=>({...t,contact:r.target.value})),className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:a("auth.emailPlaceholder")})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:a("addItem.phoneNumber")}),e.jsx("input",{type:"tel",value:l.phone,onChange:r=>o(t=>({...t,phone:r.target.value})),className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:a("auth.phoneNumberPlaceholder")})]})]}),u&&!u.includes("upload")&&!u.includes("Upload")&&e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-xl p-4 flex items-start",children:e.jsx("p",{className:"text-sm text-red-600",children:u})}),e.jsxs("div",{className:"flex items-center justify-end space-x-3 pt-4 border-t border-gray-200",children:[e.jsx("button",{type:"button",onClick:k,className:"px-6 py-3 border border-gray-300 text-gray-700 rounded-xl hover:bg-gray-50 transition-colors font-medium",children:a("items.cancel")}),e.jsxs("button",{type:"submit",disabled:N||x,className:`px-6 py-3 rounded-xl font-medium transition-colors flex items-center ${l.status==="Lost"?"bg-red-600 hover:bg-red-700 text-white":"bg-green-600 hover:bg-green-700 text-white"} disabled:opacity-50`,children:[e.jsx(R,{className:"h-5 w-5 mr-2"}),N?a(s?"addItem.updating":"addItem.posting"):s?a("addItem.updateButton"):a("addItem.postButton",{status:l.status})]})]})]})]})})};export{Y as default};
//# sourceMappingURL=ModernAddItem-7wVd7cnS.js.map
