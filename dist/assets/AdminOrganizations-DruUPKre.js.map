{"version":3,"file":"AdminOrganizations-DruUPKre.js","sources":["../../src/pages/admin/AdminOrganizations.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { useTranslation } from 'react-i18next';\r\nimport { Search, Building2, CheckCircle, Clock, Ban, Edit, Trash2, Eye, Plus } from 'lucide-react';\r\n\r\nconst AdminOrganizations = ({ darkMode, currentUser }) => {\r\n  const { t } = useTranslation();\r\n  const [organizations, setOrganizations] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [searchTerm, setSearchTerm] = useState('');\r\n  const [filterStatus, setFilterStatus] = useState('all');\r\n  const [filterType, setFilterType] = useState('all');\r\n  const [selectedOrg, setSelectedOrg] = useState(null);\r\n  const [showDetailModal, setShowDetailModal] = useState(false);\r\n  const [showCreateModal, setShowCreateModal] = useState(false);\r\n  const [showDeleteModal, setShowDeleteModal] = useState(false);\r\n  const [orgToDelete, setOrgToDelete] = useState(null);\r\n  const [stats, setStats] = useState({});\r\n\r\n  // Debug state\r\n  const [showDebug, setShowDebug] = useState(false);\r\n  const [debugInfo, setDebugInfo] = useState({});\r\n\r\n  const orgTypes = ['university', 'municipality', 'hospital', 'transport', 'government', 'other'];\r\n  const statusOptions = ['all', 'pending', 'active', 'suspended', 'rejected'];\r\n\r\n  useEffect(() => {\r\n    fetchOrganizations();\r\n    \r\n    // Update debug info\r\n    setDebugInfo({\r\n      timestamp: new Date().toISOString(),\r\n      localStorage: {\r\n        token: localStorage.getItem('token') ? 'Present' : 'Missing',\r\n        user: localStorage.getItem('user') ? 'Present' : 'Missing',\r\n        userRole: localStorage.getItem('userRole') || 'Missing'\r\n      },\r\n      currentUser: currentUser || 'Not provided',\r\n      windowLocation: window.location.href\r\n    });\r\n\r\n    // FALLBACK AUTHENTICATION: If no currentUser but we have localStorage data, try to authenticate\r\n    if (!currentUser) {\r\n      const storedUser = localStorage.getItem('user');\r\n      const storedToken = localStorage.getItem('token');\r\n      \r\n      if (storedUser && storedToken) {\r\n        try {\r\n          const user = JSON.parse(storedUser);\r\n          console.log('üîÑ Fallback authentication: Found stored user', user);\r\n          \r\n          // Test if the token is still valid by making a quick API call\r\n          fetch('http://localhost:5001/api/organizations', {\r\n            method: 'GET',\r\n            headers: {\r\n              'Authorization': `Bearer ${storedToken}`,\r\n              'Content-Type': 'application/json'\r\n            }\r\n          })\r\n          .then(response => {\r\n            if (response.ok) {\r\n              console.log('‚úÖ Stored token is valid, user should be authenticated');\r\n            } else {\r\n              console.log('‚ùå Stored token is invalid, clearing localStorage');\r\n              localStorage.clear();\r\n            }\r\n          })\r\n          .catch(error => {\r\n            console.log('‚ùå Token validation failed:', error);\r\n          });\r\n          \r\n        } catch (error) {\r\n          console.error('Error parsing stored user:', error);\r\n          localStorage.clear();\r\n        }\r\n      } else {\r\n        console.log('‚ö†Ô∏è No authentication data found. User needs to login.');\r\n      }\r\n    }\r\n  }, [currentUser]);\r\n\r\n  // Recalculate stats when organizations change\r\n  useEffect(() => {\r\n    if (organizations.length > 0) {\r\n      fetchStats();\r\n    }\r\n  }, [organizations]);\r\n\r\n  const fetchOrganizations = async () => {\r\n    try {\r\n      setLoading(true);\r\n      \r\n      // Get auth token from localStorage\r\n      let token = localStorage.getItem('token');\r\n      \r\n      if (!token) {\r\n        console.error('No auth token found in localStorage');\r\n        console.log('Available localStorage keys:', Object.keys(localStorage));\r\n        \r\n        // Try to get user data and check if we need to re-authenticate\r\n        const userData = localStorage.getItem('user');\r\n        if (userData) {\r\n          console.log('User data found but no token. User may need to re-login.');\r\n        }\r\n        \r\n        setOrganizations([]);\r\n        return;\r\n      }\r\n\r\n      console.log('Making API request with token:', token.substring(0, 30) + '...');\r\n\r\n      // Fetch real organizations from API\r\n      const response = await fetch('http://localhost:5001/api/organizations', {\r\n        method: 'GET',\r\n        headers: {\r\n          'Authorization': `Bearer ${token}`,\r\n          'Content-Type': 'application/json'\r\n        }\r\n      });\r\n\r\n      console.log('API Response Status:', response.status);\r\n      console.log('API Response OK:', response.ok);\r\n\r\n      if (response.ok) {\r\n        const data = await response.json();\r\n        console.log('Organizations fetched successfully:', data);\r\n        \r\n        // Handle different response formats\r\n        const orgsData = data.data || data.organizations || data;\r\n        const organizations = Array.isArray(orgsData) ? orgsData : [];\r\n        \r\n        console.log('Raw organizations data:', organizations);\r\n        console.log('Organizations count:', organizations.length);\r\n        \r\n        // Transform data to match component expectations\r\n        const transformedOrgs = organizations.map(org => ({\r\n          _id: org._id,\r\n          name: org.name,\r\n          organizationId: org.organizationId,\r\n          type: org.type,\r\n          sectorLevel: org.sectorLevel,\r\n          status: org.isActive ? 'active' : 'pending',\r\n          verificationStatus: org.verificationStatus,\r\n          contact: {\r\n            email: org.contact?.email,\r\n            phone: org.contact?.phone\r\n          },\r\n          createdAt: org.createdAt || org.registrationDate,\r\n          adminId: org.adminId\r\n        }));\r\n        \r\n        console.log('Transformed organizations:', transformedOrgs);\r\n        setOrganizations(transformedOrgs);\r\n        \r\n        // Force stats calculation even if organizations array is empty\r\n        setTimeout(() => {\r\n          fetchStats();\r\n        }, 100);\r\n        \r\n      } else {\r\n        console.error('Failed to fetch organizations:', response.status, response.statusText);\r\n        \r\n        // Get error details\r\n        try {\r\n          const errorData = await response.json();\r\n          console.error('Error details:', errorData);\r\n          \r\n          if (response.status === 401) {\r\n            console.error('Authentication failed - token may be expired');\r\n            // Clear invalid token\r\n            localStorage.removeItem('token');\r\n          } else if (response.status === 403) {\r\n            console.error('Access denied - user may not have permission to view organizations');\r\n            const userData = localStorage.getItem('user');\r\n            if (userData) {\r\n              const user = JSON.parse(userData);\r\n              console.error('Current user role:', user.role);\r\n            }\r\n          }\r\n        } catch (parseError) {\r\n          console.error('Could not parse error response:', parseError);\r\n        }\r\n        \r\n        setOrganizations([]);\r\n      }\r\n    } catch (error) {\r\n      console.error('Error fetching organizations:', error);\r\n      console.error('Error details:', {\r\n        message: error.message,\r\n        stack: error.stack,\r\n        name: error.name\r\n      });\r\n      \r\n      // Check if it's a network error\r\n      if (error.message.includes('fetch')) {\r\n        console.error('Network error - backend server may not be running on http://localhost:5001');\r\n      }\r\n      \r\n      setOrganizations([]);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const fetchStats = async () => {\r\n    try {\r\n      // Calculate stats from the organizations data\r\n      const total = organizations.length;\r\n      const active = organizations.filter(org => org.status === 'active').length;\r\n      const pending = organizations.filter(org => org.status === 'pending').length;\r\n      const suspended = organizations.filter(org => org.status === 'suspended').length;\r\n      \r\n      const calculatedStats = {\r\n        organizations: {\r\n          total,\r\n          active,\r\n          pending,\r\n          suspended\r\n        }\r\n      };\r\n      \r\n      console.log('Stats calculated:', calculatedStats);\r\n      setStats(calculatedStats);\r\n    } catch (error) {\r\n      console.error('Error calculating stats:', error);\r\n      // Set default stats if calculation fails\r\n      setStats({\r\n        organizations: {\r\n          total: 0,\r\n          active: 0,\r\n          pending: 0,\r\n          suspended: 0\r\n        }\r\n      });\r\n    }\r\n  };\r\n\r\n  const handleStatusChange = async (orgId, newStatus, reason = '') => {\r\n    try {\r\n      // Update local state for demo\r\n      setOrganizations(orgs => \r\n        orgs.map(org => \r\n          org._id === orgId ? { ...org, status: newStatus } : org\r\n        )\r\n      );\r\n      alert(`Organization status updated to ${newStatus}`);\r\n      await fetchStats();\r\n    } catch (error) {\r\n      console.error('Error updating status:', error);\r\n      alert('Error updating status');\r\n    }\r\n  };\r\n\r\n  const handleDeleteOrganization = async (orgId, transferData = null) => {\r\n    try {\r\n      // Remove from local state for demo\r\n      setOrganizations(orgs => orgs.filter(org => org._id !== orgId));\r\n      setShowDeleteModal(false);\r\n      setOrgToDelete(null);\r\n      alert('Organization deleted successfully');\r\n      await fetchStats();\r\n    } catch (error) {\r\n      console.error('Error deleting organization:', error);\r\n      alert('Error deleting organization');\r\n    }\r\n  };\r\n\r\n  // Filter organizations\r\n  const filteredOrgs = organizations.filter(org => {\r\n    const matchesSearch = \r\n      org.name?.toLowerCase().includes(searchTerm.toLowerCase()) ||\r\n      org.organizationId?.toLowerCase().includes(searchTerm.toLowerCase()) ||\r\n      org.contact?.email?.toLowerCase().includes(searchTerm.toLowerCase());\r\n    \r\n    const matchesStatus = filterStatus === 'all' || org.status === filterStatus;\r\n    const matchesType = filterType === 'all' || org.type === filterType;\r\n    \r\n    return matchesSearch && matchesStatus && matchesType;\r\n  });\r\n\r\n  const getStatusIcon = (status) => {\r\n    switch (status) {\r\n      case 'active': return ;\r\n      case 'pending': return ;\r\n      case 'suspended': return ;\r\n      case 'rejected': return ;\r\n      default: return ;\r\n    }\r\n  };\r\n\r\n  const getStatusColor = (status) => {\r\n    switch (status) {\r\n      case 'active': return 'bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200';\r\n      case 'pending': return 'bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200';\r\n      case 'suspended': return 'bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200';\r\n      case 'rejected': return 'bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200';\r\n      default: return 'bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-200';\r\n    }\r\n  };\r\n\r\n  const StatCard = ({ title, value, icon: Icon, color = 'text-blue-600' }) => (\r\n    <div className={`${darkMode ? 'bg-gray-800 border-gray-700' : 'bg-white border-gray-200'} border rounded-lg p-6`}>\r\n      <div className=\"flex items-center justify-between\">\r\n        <div>\r\n          <p className={`text-sm ${darkMode ? 'text-gray-400' : 'text-gray-600'}`}>{title}</p>\r\n          <p className={`text-2xl font-bold ${darkMode ? 'text-white' : 'text-gray-900'} mt-1`}>{value}</p>\r\n        </div>\r\n        \r\n      </div>\r\n    </div>\r\n  );\r\n\r\n  const OrganizationCard = ({ org }) => (\r\n    <div className={`${darkMode ? 'bg-gray-800 border-gray-700' : 'bg-white border-gray-200'} border rounded-lg p-6 hover:shadow-lg transition-shadow`}>\r\n      <div className=\"flex items-start justify-between mb-4\">\r\n        <div className=\"flex-1\">\r\n          <div className=\"flex items-center space-x-2 mb-2\">\r\n            \r\n            <h3 className={`text-lg font-semibold ${darkMode ? 'text-white' : 'text-gray-900'}`}>\r\n              {org.name}\r\n            </h3>\r\n          </div>\r\n          <p className={`text-sm ${darkMode ? 'text-gray-400' : 'text-gray-600'} mb-2`}>\r\n            ID: {org.organizationId}\r\n          </p>\r\n          <div className=\"flex items-center space-x-2 mb-3\">\r\n            {getStatusIcon(org.status)}\r\n            <span className={`px-2 py-1 text-xs font-medium rounded-full ${getStatusColor(org.status)}`}>\r\n              {org.status}\r\n            </span>\r\n            <span className={`px-2 py-1 text-xs font-medium rounded-full ${darkMode ? 'bg-gray-700 text-gray-300' : 'bg-gray-100 text-gray-700'}`}>\r\n              {org.type}\r\n            </span>\r\n          </div>\r\n        </div>\r\n        \r\n        <div className=\"flex items-center space-x-2\">\r\n          <button\r\n            onClick={() => {\r\n              setSelectedOrg(org);\r\n              setShowDetailModal(true);\r\n            }}\r\n            className=\"p-2 text-blue-600 hover:bg-blue-50 dark:hover:bg-blue-900/20 rounded-lg transition-colors\"\r\n            title=\"View Details\"\r\n          >\r\n            \r\n          </button>\r\n          \r\n          {org.status === 'pending' && (\r\n            <>\r\n              <button\r\n                onClick={() => handleStatusChange(org._id, 'active')}\r\n                className=\"p-2 text-green-600 hover:bg-green-50 dark:hover:bg-green-900/20 rounded-lg transition-colors\"\r\n                title=\"Approve\"\r\n              >\r\n                \r\n              </button>\r\n              <button\r\n                onClick={() => {\r\n                  const reason = prompt('Reason for rejection:');\r\n                  if (reason) handleStatusChange(org._id, 'rejected', reason);\r\n                }}\r\n                className=\"p-2 text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg transition-colors\"\r\n                title=\"Reject\"\r\n              >\r\n                \r\n              </button>\r\n            </>\r\n          )}\r\n          \r\n          {org.status === 'active' && (\r\n            <button\r\n              onClick={() => {\r\n                const reason = prompt('Reason for suspension:');\r\n                if (reason) handleStatusChange(org._id, 'suspended', reason);\r\n              }}\r\n              className=\"p-2 text-yellow-600 hover:bg-yellow-50 dark:hover:bg-yellow-900/20 rounded-lg transition-colors\"\r\n              title=\"Suspend\"\r\n            >\r\n              \r\n            </button>\r\n          )}\r\n          \r\n          {org.status === 'suspended' && (\r\n            <button\r\n              onClick={() => handleStatusChange(org._id, 'active')}\r\n              className=\"p-2 text-green-600 hover:bg-green-50 dark:hover:bg-green-900/20 rounded-lg transition-colors\"\r\n              title=\"Reactivate\"\r\n            >\r\n              \r\n            </button>\r\n          )}\r\n          \r\n          <button\r\n            onClick={() => {\r\n              setOrgToDelete(org);\r\n              setShowDeleteModal(true);\r\n            }}\r\n            className=\"p-2 text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg transition-colors\"\r\n            title=\"Delete\"\r\n          >\r\n            \r\n          </button>\r\n        </div>\r\n      </div>\r\n      \r\n      <div className=\"grid grid-cols-2 gap-4 text-sm\">\r\n        <div>\r\n          <span className={`${darkMode ? 'text-gray-400' : 'text-gray-600'}`}>Email:</span>\r\n          <p className={`${darkMode ? 'text-white' : 'text-gray-900'} truncate`}>\r\n            {org.contact?.email}\r\n          </p>\r\n        </div>\r\n        <div>\r\n          <span className={`${darkMode ? 'text-gray-400' : 'text-gray-600'}`}>Phone:</span>\r\n          <p className={`${darkMode ? 'text-white' : 'text-gray-900'}`}>\r\n            {org.contact?.phone}\r\n          </p>\r\n        </div>\r\n        <div>\r\n          <span className={`${darkMode ? 'text-gray-400' : 'text-gray-600'}`}>Sector:</span>\r\n          <p className={`${darkMode ? 'text-white' : 'text-gray-900'}`}>\r\n            {org.sectorLevel}\r\n          </p>\r\n        </div>\r\n        <div>\r\n          <span className={`${darkMode ? 'text-gray-400' : 'text-gray-600'}`}>Created:</span>\r\n          <p className={`${darkMode ? 'text-white' : 'text-gray-900'}`}>\r\n            {new Date(org.createdAt).toLocaleDateString()}\r\n          </p>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className={`min-h-screen ${darkMode ? 'bg-gray-900' : 'bg-gray-50'} p-6`}>\r\n        <div className=\"max-w-7xl mx-auto\">\r\n          <div className=\"flex items-center justify-center h-64\">\r\n            <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600\"></div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  // AUTHENTICATION CHECK: If no token, show login prompt\r\n  const token = localStorage.getItem('token');\r\n  if (!token) {\r\n    return (\r\n      <div className={`min-h-screen ${darkMode ? 'bg-gray-900' : 'bg-gray-50'} p-6`}>\r\n        <div className=\"max-w-7xl mx-auto\">\r\n          <div className=\"flex items-center justify-center h-64\">\r\n            <div className={`${darkMode ? 'bg-gray-800 border-gray-700' : 'bg-white border-gray-200'} border rounded-lg p-8 text-center max-w-md`}>\r\n              <h3 className={`text-lg font-medium ${darkMode ? 'text-white' : 'text-gray-900'} mb-4`}>\r\n                üîê Authentication Required\r\n              </h3>\r\n              <p className={`${darkMode ? 'text-gray-400' : 'text-gray-600'} mb-6`}>\r\n                You need to be logged in as an admin to view organizations.\r\n              </p>\r\n              <div className=\"space-y-3\">\r\n                <button\r\n                  onClick={async () => {\r\n                    // Auto-login as Hall Admin\r\n                    try {\r\n                      console.log('üîÑ Attempting login...');\r\n                      const response = await fetch('http://localhost:5001/api/auth/login', {\r\n                        method: 'POST',\r\n                        headers: { 'Content-Type': 'application/json' },\r\n                        body: JSON.stringify({ email: 'admin@system.com', password: 'admin123' })\r\n                      });\r\n                      \r\n                      console.log('üì° Response status:', response.status);\r\n                      const data = await response.json();\r\n                      console.log('üìä Response data:', data);\r\n                      \r\n                      if (response.ok && data.success) {\r\n                        localStorage.setItem('token', data.token);\r\n                        localStorage.setItem('user', JSON.stringify(data.user));\r\n                        localStorage.setItem('userRole', data.user.role);\r\n                        \r\n                        console.log('‚úÖ Login successful, reloading...');\r\n                        // Refresh the page to reload with authentication\r\n                        window.location.reload();\r\n                      } else {\r\n                        console.error('‚ùå Login failed:', data.message);\r\n                        alert('Login failed: ' + (data.message || 'Unknown error'));\r\n                      }\r\n                    } catch (error) {\r\n                      console.error('‚ùå Login error:', error);\r\n                      alert('Login error: ' + error.message + '\\n\\nMake sure backend is running on port 5001');\r\n                    }\r\n                  }}\r\n                  className=\"w-full bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700 transition-colors font-medium\"\r\n                >\r\n                  üöÄ Auto-Login as Hall Admin\r\n                </button>\r\n                \r\n                <button\r\n                  onClick={() => {\r\n                    // Redirect to login page\r\n                    window.location.href = '/';\r\n                  }}\r\n                  className=\"w-full bg-gray-600 text-white px-6 py-3 rounded-lg hover:bg-gray-700 transition-colors font-medium\"\r\n                >\r\n                  üîë Go to Admin Login\r\n                </button>\r\n              </div>\r\n              <p className={`text-xs ${darkMode ? 'text-gray-500' : 'text-gray-400'} mt-4`}>\r\n                Auto-login uses admin@system.com / admin123\r\n              </p>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className={`min-h-screen ${darkMode ? 'bg-gray-900' : 'bg-gray-50'} p-6`}>\r\n      <div className=\"max-w-7xl mx-auto\">\r\n        {/* Header */}\r\n        <div className=\"mb-8\">\r\n          <div className=\"flex items-center justify-between\">\r\n            <div>\r\n              <h1 className={`text-3xl font-bold ${darkMode ? 'text-white' : 'text-gray-900'}`}>\r\n                Organization Management\r\n              </h1>\r\n              <p className={`mt-2 ${darkMode ? 'text-gray-400' : 'text-gray-600'}`}>\r\n                Manage and control all organizations in the system\r\n              </p>\r\n            </div>\r\n            <button\r\n              onClick={() => alert('Create Organization feature coming soon!')}\r\n              className=\"flex items-center space-x-2 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors\"\r\n            >\r\n              \r\n              <span>Create Organization</span>\r\n            </button>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Statistics */}\r\n        <div className=\"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8\">\r\n          <StatCard\r\n            title=\"Total Organizations\"\r\n            value={stats.organizations?.total || 0}\r\n            color=\"text-blue-600\"\r\n          />\r\n          <StatCard\r\n            title=\"Active\"\r\n            value={stats.organizations?.active || 0}\r\n            color=\"text-green-600\"\r\n          />\r\n          <StatCard\r\n            title=\"Pending Approval\"\r\n            value={stats.organizations?.pending || 0}\r\n            color=\"text-yellow-600\"\r\n          />\r\n          <StatCard\r\n            title=\"Suspended\"\r\n            value={stats.organizations?.suspended || 0}\r\n            color=\"text-red-600\"\r\n          />\r\n        </div>\r\n\r\n        {/* Filters */}\r\n        <div className={`${darkMode ? 'bg-gray-800' : 'bg-white'} rounded-lg shadow p-6 mb-6`}>\r\n          <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\r\n            <div className=\"relative\">\r\n              \r\n              <input\r\n                type=\"text\"\r\n                placeholder=\"Search organizations...\"\r\n                value={searchTerm}\r\n                onChange={(e) => setSearchTerm(e.target.value)}\r\n                className={`w-full pl-10 pr-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent ${\r\n                  darkMode ? 'bg-gray-700 border-gray-600 text-white' : 'bg-white border-gray-300'\r\n                }`}\r\n              />\r\n            </div>\r\n            \r\n            <select\r\n              value={filterStatus}\r\n              onChange={(e) => setFilterStatus(e.target.value)}\r\n              className={`px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent ${\r\n                darkMode ? 'bg-gray-700 border-gray-600 text-white' : 'bg-white border-gray-300'\r\n              }`}\r\n            >\r\n              {statusOptions.map(status => (\r\n                <option key={status} value={status}>\r\n                  {status === 'all' ? 'All Status' : status.charAt(0).toUpperCase() + status.slice(1)}\r\n                </option>\r\n              ))}\r\n            </select>\r\n            \r\n            <select\r\n              value={filterType}\r\n              onChange={(e) => setFilterType(e.target.value)}\r\n              className={`px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent ${\r\n                darkMode ? 'bg-gray-700 border-gray-600 text-white' : 'bg-white border-gray-300'\r\n              }`}\r\n            >\r\n              <option value=\"all\">All Types</option>\r\n              {orgTypes.map(type => (\r\n                <option key={type} value={type}>\r\n                  {type.charAt(0).toUpperCase() + type.slice(1)}\r\n                </option>\r\n              ))}\r\n            </select>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Organizations Grid */}\r\n        <div className=\"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-6\">\r\n          {filteredOrgs.map(org => (\r\n            <OrganizationCard key={org._id} org={org} />\r\n          ))}\r\n        </div>\r\n\r\n        {filteredOrgs.length === 0 && (\r\n          <div className={`${darkMode ? 'bg-gray-800' : 'bg-white'} rounded-lg shadow p-12 text-center`}>\r\n            \r\n            <h3 className={`text-lg font-medium ${darkMode ? 'text-white' : 'text-gray-900'} mb-2`}>\r\n              No organizations found\r\n            </h3>\r\n            <p className={`${darkMode ? 'text-gray-400' : 'text-gray-600'}`}>\r\n              {searchTerm || filterStatus !== 'all' || filterType !== 'all' \r\n                ? 'Try adjusting your search or filters'\r\n                : 'No organizations have been registered yet'\r\n              }\r\n            </p>\r\n          </div>\r\n        )}\r\n\r\n        {/* Simple Detail Modal */}\r\n        {showDetailModal && selectedOrg && (\r\n          <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4\">\r\n            <div className={`${darkMode ? 'bg-gray-800' : 'bg-white'} rounded-lg max-w-2xl w-full p-6`}>\r\n              <div className=\"flex justify-between items-start mb-4\">\r\n                <h2 className={`text-xl font-bold ${darkMode ? 'text-white' : 'text-gray-900'}`}>\r\n                  {selectedOrg.name}\r\n                </h2>\r\n                <button\r\n                  onClick={() => setShowDetailModal(false)}\r\n                  className={`${darkMode ? 'text-gray-400 hover:text-gray-200' : 'text-gray-600 hover:text-gray-800'}`}\r\n                >\r\n                  \r\n                </button>\r\n              </div>\r\n              \r\n              <div className=\"space-y-4\">\r\n                <div>\r\n                  <strong>Organization ID:</strong> {selectedOrg.organizationId}\r\n                </div>\r\n                <div>\r\n                  <strong>Type:</strong> {selectedOrg.type}\r\n                </div>\r\n                <div>\r\n                  <strong>Sector Level:</strong> {selectedOrg.sectorLevel}\r\n                </div>\r\n                <div>\r\n                  <strong>Status:</strong> {selectedOrg.status}\r\n                </div>\r\n                <div>\r\n                  <strong>Email:</strong> {selectedOrg.contact?.email}\r\n                </div>\r\n                <div>\r\n                  <strong>Phone:</strong> {selectedOrg.contact?.phone}\r\n                </div>\r\n                <div>\r\n                  <strong>Created:</strong> {new Date(selectedOrg.createdAt).toLocaleDateString()}\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {/* Simple Delete Modal */}\r\n        {showDeleteModal && orgToDelete && (\r\n          <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4\">\r\n            <div className={`${darkMode ? 'bg-gray-800' : 'bg-white'} rounded-lg max-w-md w-full p-6`}>\r\n              <h2 className={`text-xl font-bold ${darkMode ? 'text-white' : 'text-gray-900'} mb-4`}>\r\n                Delete Organization\r\n              </h2>\r\n              <p className={`${darkMode ? 'text-gray-300' : 'text-gray-600'} mb-6`}>\r\n                Are you sure you want to delete <strong>{orgToDelete.name}</strong>? This action cannot be undone.\r\n              </p>\r\n              <div className=\"flex justify-end space-x-3\">\r\n                <button\r\n                  onClick={() => setShowDeleteModal(false)}\r\n                  className={`px-4 py-2 border rounded-lg ${\r\n                    darkMode ? 'border-gray-600 text-gray-300 hover:bg-gray-700' : 'border-gray-300 text-gray-700 hover:bg-gray-50'\r\n                  }`}\r\n                >\r\n                  Cancel\r\n                </button>\r\n                <button\r\n                  onClick={() => handleDeleteOrganization(orgToDelete._id)}\r\n                  className=\"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700\"\r\n                >\r\n                  Delete\r\n                </button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {/* Debug Panel */}\r\n        <div className=\"fixed bottom-4 right-4 z-50\">\r\n          <button\r\n            onClick={() => setShowDebug(!showDebug)}\r\n            className=\"bg-red-600 text-white px-3 py-2 rounded-lg text-sm hover:bg-red-700 transition-colors\"\r\n            title=\"Debug Panel\"\r\n          >\r\n            üêõ Debug\r\n          </button>\r\n          \r\n          {showDebug && (\r\n            <div className={`absolute bottom-12 right-0 w-96 max-h-96 overflow-y-auto ${darkMode ? 'bg-gray-800 border-gray-700' : 'bg-white border-gray-200'} border rounded-lg shadow-lg p-4`}>\r\n              <div className=\"flex justify-between items-center mb-3\">\r\n                <h3 className={`font-bold ${darkMode ? 'text-white' : 'text-gray-900'}`}>Debug Info</h3>\r\n                <button\r\n                  onClick={() => setShowDebug(false)}\r\n                  className={`${darkMode ? 'text-gray-400 hover:text-gray-200' : 'text-gray-600 hover:text-gray-800'}`}\r\n                >\r\n                  ‚úï\r\n                </button>\r\n              </div>\r\n              \r\n              <div className=\"space-y-2 text-sm\">\r\n                <div>\r\n                  <strong>Organizations Count:</strong> {organizations.length}\r\n                </div>\r\n                <div>\r\n                  <strong>Loading:</strong> {loading ? 'Yes' : 'No'}\r\n                </div>\r\n                <div>\r\n                  <strong>Token:</strong> {debugInfo.localStorage?.token}\r\n                </div>\r\n                <div>\r\n                  <strong>User Role:</strong> {debugInfo.localStorage?.userRole}\r\n                </div>\r\n                <div>\r\n                  <strong>Current User:</strong> {currentUser?.name || 'None'}\r\n                </div>\r\n                <div>\r\n                  <strong>Stats:</strong> T:{stats.organizations?.total || 0}, A:{stats.organizations?.active || 0}, P:{stats.organizations?.pending || 0}, S:{stats.organizations?.suspended || 0}\r\n                </div>\r\n                \r\n                <button\r\n                  onClick={() => {\r\n                    console.log('=== MANUAL DEBUG ===');\r\n                    console.log('Organizations:', organizations);\r\n                    console.log('Stats:', stats);\r\n                    console.log('Debug Info:', debugInfo);\r\n                    console.log('localStorage token:', localStorage.getItem('token'));\r\n                    console.log('localStorage user:', localStorage.getItem('user'));\r\n                    console.log('Current User:', currentUser);\r\n                    fetchOrganizations();\r\n                  }}\r\n                  className=\"w-full bg-blue-600 text-white px-3 py-1 rounded text-xs hover:bg-blue-700 transition-colors\"\r\n                >\r\n                  Refresh & Log Debug\r\n                </button>\r\n                \r\n                <button\r\n                  onClick={() => {\r\n                    // Clear localStorage and reload\r\n                    localStorage.clear();\r\n                    window.location.reload();\r\n                  }}\r\n                  className=\"w-full bg-red-600 text-white px-3 py-1 rounded text-xs hover:bg-red-700 transition-colors\"\r\n                >\r\n                  Clear Storage & Reload\r\n                </button>\r\n              </div>\r\n            </div>\r\n          )}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default AdminOrganizations;"],"names":["AdminOrganizations","darkMode","currentUser","t","useTranslation","organizations","setOrganizations","useState","loading","setLoading","searchTerm","setSearchTerm","filterStatus","setFilterStatus","filterType","setFilterType","selectedOrg","setSelectedOrg","showDetailModal","setShowDetailModal","showCreateModal","setShowCreateModal","showDeleteModal","setShowDeleteModal","orgToDelete","setOrgToDelete","stats","setStats","showDebug","setShowDebug","debugInfo","setDebugInfo","orgTypes","statusOptions","useEffect","fetchOrganizations","storedUser","storedToken","user","response","error","fetchStats","token","data","orgsData","transformedOrgs","org","_a","_b","errorData","userData","parseError","total","active","pending","suspended","calculatedStats","handleStatusChange","orgId","newStatus","reason","orgs","handleDeleteOrganization","transferData","filteredOrgs","matchesSearch","_d","_c","matchesStatus","matchesType","getStatusIcon","status","getStatusColor","StatCard","title","value","Icon","color","jsx","jsxs","OrganizationCard","Fragment","e","type","_e","_f","_g","_h","_i","_j","_k","_l"],"mappings":"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"}