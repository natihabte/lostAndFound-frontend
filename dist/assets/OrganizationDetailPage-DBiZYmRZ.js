const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-Iy8zicZ9.js","assets/index-DORVt_Xd.css"])))=>i.map(i=>d[i]);
import{u as H,r as i,j as e,L as Q,N as J,_ as W}from"./index-Iy8zicZ9.js";import{M as q}from"./ModernItemCard-DQ6JgwOD.js";import{f as Y,U as G}from"./UniversalSearchBar-C9m4LD1H.js";import"./circle-check-big-CFTT60CK.js";import"./eye-BVImR0vu.js";import"./calendar-CrPmhWw_.js";import"./map-pin-Bs7t3nXu.js";import"./tag-r4h69r7g.js";import"./mail-DoQa2HGT.js";import"./trash-2-B1NMGobO.js";const le=({organization:s,onBack:v,isLoggedIn:g,currentUser:a,darkMode:t,setCurrentPage:j,onClaimItem:T,onContactOwner:P,onViewDetails:B})=>{var L,R,F,O;const{t:x}=H(),[o,N]=i.useState([]),[E,w]=i.useState(!0),[p,D]=i.useState(""),[h,A]=i.useState("all"),[b,$]=i.useState("all"),[y,I]=i.useState("grid"),[C,K]=i.useState("date"),[u,S]=i.useState("items"),V=[{value:"electronic",label:x("categories.electronic")},{value:"clothing",label:x("categories.clothing")},{value:"accessory",label:x("categories.accessory")},{value:"document",label:x("categories.document")},{value:"book",label:x("categories.book")},{value:"other",label:x("categories.other")}],_=[{_id:"item_1",title:"Lost Student ID Card",category:"document",status:"Lost",location:"Main Library",description:"Blue student ID card with photo, lost near the entrance",imageUrl:"https://placehold.co/300x200/ef4444/white?text=ID+Card",owner:{name:"John Doe",_id:"user_1"},organization:s==null?void 0:s.id,date:"2025-02-01",claimed:!1},{_id:"item_2",title:"Found Laptop Charger",category:"electronic",status:"Found",location:"Computer Lab 2",description:"Dell laptop charger found on desk",imageUrl:"https://placehold.co/300x200/10b981/white?text=Charger",owner:{name:"Sarah Wilson",_id:"user_2"},organization:s==null?void 0:s.id,date:"2025-02-02",claimed:!1},{_id:"item_3",title:"Lost Textbook",category:"book",status:"Lost",location:"Lecture Hall A",description:"Mathematics textbook, 3rd edition",imageUrl:"https://placehold.co/300x200/f59e0b/white?text=Book",owner:{name:"Mike Johnson",_id:"user_3"},organization:s==null?void 0:s.id,date:"2025-02-03",claimed:!1}];i.useEffect(()=>{(async()=>{if(s!=null&&s.id){w(!0);try{const{organizationsAPI:r}=await W(async()=>{const{organizationsAPI:d}=await import("./index-Iy8zicZ9.js").then(m=>m.i);return{organizationsAPI:d}},__vite__mapDeps([0,1])),c=await r.getItems(s.id);console.log("üè¢ Organization items from API:",c.data),N(c.data||[])}catch(r){console.error("Failed to fetch organization items:",r),console.log("üè¢ Using mock items as fallback:",_),N(_)}finally{w(!1)}}})()},[s]);const n=i.useMemo(()=>{const l=o.filter(m=>m.status==="Lost").length,r=o.filter(m=>m.status==="Found").length,c=o.filter(m=>m.claimed===!0).length,d=o.filter(m=>m.claimed!==!0).length;return{lostItems:l,foundItems:r,returnedItems:c,activeItems:d,totalItems:o.length}},[o]),f=i.useMemo(()=>Y(o,p).filter(r=>{const c=h==="all"||r.category===h,d=b==="all"||r.status===b;return c&&d}).sort((r,c)=>{switch(C){case"title":return r.title.localeCompare(c.title);case"date":default:return new Date(c.date)-new Date(r.date)}}),[o,p,h,b,C]);return s?(console.log("‚úÖ OrganizationDetailPage: Organization data:",s),e.jsxs("div",{className:`min-h-screen ${t?"bg-gray-900":"bg-gray-50"}`,children:[e.jsx("div",{className:`${t?"bg-gray-800 border-gray-700":"bg-white border-gray-200"} border-b`,children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:[e.jsx("button",{onClick:v,className:`inline-flex items-center mb-6 px-4 py-2 rounded-xl transition-colors ${t?"text-gray-300 hover:text-white hover:bg-gray-700":"text-gray-600 hover:text-gray-900 hover:bg-gray-100"}`,children:"Back to Organizations"}),e.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-start lg:justify-between gap-6",children:[e.jsxs("div",{className:"flex items-start space-x-6",children:[e.jsx("img",{src:s.logo,alt:s.name,className:"w-24 h-24 rounded-2xl object-cover border-4 border-white shadow-lg"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"flex items-center space-x-3 mb-2",children:e.jsx("h1",{className:`text-3xl font-bold ${t?"text-white":"text-gray-900"}`,children:s.name})}),e.jsxs("div",{className:"flex items-center space-x-4 text-sm mb-3",children:[e.jsx("div",{className:`flex items-center ${t?"text-gray-300":"text-gray-600"}`,children:s.location}),e.jsxs("div",{className:`flex items-center ${t?"text-gray-300":"text-gray-600"}`,children:[s.rating," Rating"]}),e.jsxs("div",{className:`flex items-center ${t?"text-gray-300":"text-gray-600"}`,children:[n.activeItems," Active Items"]})]}),e.jsx("p",{className:`${t?"text-gray-300":"text-gray-600"} max-w-2xl`,children:s.description})]})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[g?e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>{s.name,s.id,a!=null&&a.name,a!=null&&a.email,new Date().toISOString(),window.location.href=`mailto:admin@platform.com?subject=Item Report for ${s.name}&body=Hello Admin,%0D%0A%0D%0AI want to report an item:%0D%0A%0D%0AOrganization: ${s.name}%0D%0AReported by: ${(a==null?void 0:a.name)||"User"}%0D%0AEmail: ${(a==null?void 0:a.email)||"user@email.com"}%0D%0ADate: ${new Date().toLocaleDateString()}%0D%0A%0D%0AItem Details:%0D%0A[ ] Lost Item%0D%0A[ ] Found Item%0D%0A%0D%0ATitle: %0D%0ACategory: %0D%0ALocation: %0D%0ADescription: %0D%0A%0D%0APlease add this item to the system.%0D%0A%0D%0AThank you!`},className:"inline-flex items-center px-6 py-3 bg-orange-600 text-white rounded-xl hover:bg-orange-700 transition-colors focus:outline-none focus:ring-2 focus:ring-orange-500 focus:ring-offset-2",children:"Report Item to Admin"}),e.jsx("button",{onClick:()=>{const l=prompt(`Quick Report for ${s.name}:

Enter item details (Title, Category, Location, Description):`);l&&(window.location.href=`mailto:admin@platform.com?subject=Quick Item Report - ${s.name}&body=Hello Admin,%0D%0A%0D%0AQuick item report:%0D%0A%0D%0AOrganization: ${s.name}%0D%0AReported by: ${(a==null?void 0:a.name)||"User"}%0D%0ADetails: ${encodeURIComponent(l)}%0D%0A%0D%0APlease add this to the system.%0D%0A%0D%0AThank you!`)},className:"inline-flex items-center px-4 py-3 border-2 border-orange-600 text-orange-600 rounded-xl hover:bg-orange-50 transition-colors focus:outline-none focus:ring-2 focus:ring-orange-500 focus:ring-offset-2",children:"üìù Quick Report"})]}):e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-gray-600 mb-3",children:"Login to report items to admin"}),e.jsx("button",{onClick:()=>j("login"),className:"px-6 py-3 bg-blue-600 text-white rounded-xl hover:bg-blue-700 transition-colors",children:"Login to Report Items"})]}),((L=s.contact)==null?void 0:L.website)&&e.jsx("a",{href:s.contact.website,target:"_blank",rel:"noopener noreferrer",className:`inline-flex items-center px-4 py-3 border rounded-xl transition-colors ${t?"border-gray-600 text-gray-300 hover:bg-gray-700":"border-gray-300 text-gray-700 hover:bg-gray-50"}`,children:"Visit Website"})]})]})]})}),e.jsx("div",{className:`${t?"bg-gray-800 border-gray-700":"bg-white border-gray-200"} border-b`,children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4",children:e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:`text-2xl font-bold ${t?"text-white":"text-gray-900"}`,children:n.lostItems}),e.jsx("div",{className:`text-sm ${t?"text-gray-400":"text-gray-600"}`,children:"Lost Items"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:`text-2xl font-bold ${t?"text-white":"text-gray-900"}`,children:n.foundItems}),e.jsx("div",{className:`text-sm ${t?"text-gray-400":"text-gray-600"}`,children:"Found Items"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:`text-2xl font-bold ${t?"text-white":"text-gray-900"}`,children:n.returnedItems}),e.jsx("div",{className:`text-sm ${t?"text-gray-400":"text-gray-600"}`,children:"Returned"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:`text-2xl font-bold ${t?"text-white":"text-gray-900"}`,children:s.rating}),e.jsx("div",{className:`text-sm ${t?"text-gray-400":"text-gray-600"}`,children:"Rating"})]})]})})}),e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e.jsx("div",{className:"mb-8",children:e.jsx("div",{className:"border-b border-gray-200",children:e.jsxs("nav",{className:"-mb-px flex space-x-8",children:[e.jsxs("button",{onClick:()=>S("items"),className:`py-2 px-1 border-b-2 font-medium text-sm transition-colors ${u==="items"?"border-blue-500 text-blue-600":t?"border-transparent text-gray-400 hover:text-gray-300 hover:border-gray-300":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:["Lost & Found Items (",f.length,")"]}),e.jsx("button",{onClick:()=>S("about"),className:`py-2 px-1 border-b-2 font-medium text-sm transition-colors ${u==="about"?"border-blue-500 text-blue-600":t?"border-transparent text-gray-400 hover:text-gray-300 hover:border-gray-300":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:"About Organization"})]})})}),u==="items"&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:`${t?"bg-gray-800 border-gray-700":"bg-white border-gray-200"} rounded-xl border p-6 mb-8`,children:e.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4",children:[e.jsx("div",{className:"flex-1 max-w-md",children:e.jsx(G,{searchTerm:p,setSearchTerm:D,placeholder:"Search items in this organization...",darkMode:t})}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("select",{value:h,onChange:l=>A(l.target.value),className:`px-4 py-2 border rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 ${t?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300 text-gray-900"}`,children:[e.jsx("option",{value:"all",children:"All Categories"}),V.map(l=>e.jsx("option",{value:l.value,children:l.label},l.value))]}),e.jsxs("select",{value:b,onChange:l=>$(l.target.value),className:`px-4 py-2 border rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 ${t?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300 text-gray-900"}`,children:[e.jsx("option",{value:"all",children:"All Status"}),e.jsx("option",{value:"Lost",children:"Lost Items"}),e.jsx("option",{value:"Found",children:"Found Items"})]}),e.jsxs("div",{className:`flex items-center border rounded-xl p-1 ${t?"border-gray-600 bg-gray-700":"border-gray-300 bg-gray-100"}`,children:[e.jsx("button",{onClick:()=>I("grid"),className:`p-2 rounded-lg transition-colors ${y==="grid"?"bg-blue-600 text-white":t?"text-gray-400 hover:text-white":"text-gray-600 hover:text-gray-900"}`}),e.jsx("button",{onClick:()=>I("list"),className:`p-2 rounded-lg transition-colors ${y==="list"?"bg-blue-600 text-white":t?"text-gray-400 hover:text-white":"text-gray-600 hover:text-gray-900"}`})]})]})]})}),E?e.jsx(Q,{darkMode:t}):f.length===0?e.jsx(J,{darkMode:t,onClearFilters:()=>{D(""),A("all"),$("all")},onReportItem:()=>{if(!g){alert("Please login to report items"),j("login");return}window.location.href=`mailto:admin@platform.com?subject=Item Report for ${s.name}&body=Hello Admin,%0D%0A%0D%0AI want to report an item for ${s.name}:%0D%0A%0D%0AReported by: ${(a==null?void 0:a.name)||"User"}%0D%0AEmail: ${(a==null?void 0:a.email)||"user@email.com"}%0D%0A%0D%0AItem Details:%0D%0A[ ] Lost Item%0D%0A[ ] Found Item%0D%0A%0D%0ATitle: %0D%0ACategory: %0D%0ALocation: %0D%0ADescription: %0D%0A%0D%0APlease add this item to the system.%0D%0A%0D%0AThank you!`},isLoggedIn:g,showReportButton:!0}):e.jsx("div",{className:y==="grid"?"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6":"space-y-4",children:f.map(l=>e.jsx(q,{item:l,isLoggedIn:g,currentUser:a,onClaim:T,onContact:P,onViewDetails:r=>{console.log("üè¢ OrganizationDetailPage: onViewDetails called with:",r),console.log("üè¢ Available items in organization:",o),B(r)},viewMode:y,darkMode:t,showOrganization:!1},l._id))})]}),u==="about"&&e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[e.jsxs("div",{className:`${t?"bg-gray-800 border-gray-700":"bg-white border-gray-200"} rounded-xl border p-6`,children:[e.jsx("h3",{className:`text-lg font-semibold mb-4 ${t?"text-white":"text-gray-900"}`,children:"Contact Information"}),e.jsxs("div",{className:"space-y-4",children:[((R=s.contact)==null?void 0:R.email)&&e.jsx("div",{className:"flex items-center",children:e.jsx("a",{href:`mailto:${s.contact.email}`,className:`${t?"text-blue-400 hover:text-blue-300":"text-blue-600 hover:text-blue-800"} transition-colors`,children:s.contact.email})}),((F=s.contact)==null?void 0:F.phone)&&e.jsx("div",{className:"flex items-center",children:e.jsx("a",{href:`tel:${s.contact.phone}`,className:`${t?"text-blue-400 hover:text-blue-300":"text-blue-600 hover:text-blue-800"} transition-colors`,children:s.contact.phone})}),((O=s.contact)==null?void 0:O.website)&&e.jsx("div",{className:"flex items-center",children:e.jsx("a",{href:s.contact.website,target:"_blank",rel:"noopener noreferrer",className:`${t?"text-blue-400 hover:text-blue-300":"text-blue-600 hover:text-blue-800"} transition-colors`,children:s.contact.website})})]})]}),e.jsxs("div",{className:`${t?"bg-gray-800 border-gray-700":"bg-white border-gray-200"} rounded-xl border p-6`,children:[e.jsx("h3",{className:`text-lg font-semibold mb-4 ${t?"text-white":"text-gray-900"}`,children:"Organization Statistics"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:`${t?"text-gray-300":"text-gray-600"}`,children:"Total Items Posted"}),e.jsx("span",{className:`font-semibold ${t?"text-white":"text-gray-900"}`,children:n.totalItems})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:`${t?"text-gray-300":"text-gray-600"}`,children:"Items Returned"}),e.jsx("span",{className:`font-semibold ${t?"text-white":"text-gray-900"}`,children:n.returnedItems})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:`${t?"text-gray-300":"text-gray-600"}`,children:"Success Rate"}),e.jsxs("span",{className:`font-semibold ${t?"text-white":"text-gray-900"}`,children:[n.totalItems>0?Math.round(n.returnedItems/n.totalItems*100):0,"%"]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:`${t?"text-gray-300":"text-gray-600"}`,children:"Member Since"}),e.jsxs("span",{className:`font-semibold ${t?"text-white":"text-gray-900"}`,children:[new Date().getFullYear()-1," "]})]})]})]})]})]})]})):(console.log("‚ùå OrganizationDetailPage: No organization provided"),e.jsx("div",{className:`min-h-screen ${t?"bg-gray-900":"bg-gray-50"} flex items-center justify-center`,children:e.jsxs("div",{className:"text-center",children:[e.jsx("h3",{className:`text-xl font-semibold mb-2 ${t?"text-white":"text-gray-900"}`,children:"Organization Not Found"}),e.jsx("p",{className:`${t?"text-gray-400":"text-gray-600"} mb-6`,children:"The organization you're looking for doesn't exist or has been removed."}),e.jsx("button",{onClick:v,className:"px-6 py-3 bg-blue-600 text-white rounded-xl hover:bg-blue-700 transition-colors",children:"Back to Organizations"})]})}))};export{le as default};
//# sourceMappingURL=OrganizationDetailPage-DBiZYmRZ.js.map
